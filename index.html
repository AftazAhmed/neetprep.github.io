<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Educational Platform - PbP</title>
<style>
  body {
    font-family: 'Montserrat', Arial, sans-serif;
    margin: 0;
    padding: 16px 8px;
    background-color: #f9fafb;
    color: #1f2937;
    overflow-x: hidden;
  }
  
  .header {
    text-align: center;
    background-color: #023047;
    color: #ffb347;
    padding: 32px 16px 24px 16px;
    border-radius: 10px;
    margin-bottom: 24px;
    position: relative;
    overflow: hidden;
  }
  
  .header::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle at center, #4f59b0 0%, transparent 70%);
    opacity: 0.3;
    pointer-events: none;
  }
  
  .header h1 {
    position: relative;
    margin: 0 0 8px 0;
    font-size: 2.5rem;
    font-weight: 900;
    letter-spacing: 2px;
    color: #ffa726;
  }
  
  .header .subtitle {
    position: relative;
    font-size: 16px;
    font-weight: 600;
    color: #b9fbc0;
    letter-spacing: 0.6px;
  }
  
  .ai-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, #dc2626 0%, #2563eb 100%);
    color: white;
    border: none;
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
  }
  
  .ai-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.5);
  }
  
  .chatgpt-btn {
    background: linear-gradient(90deg, #dc2626 0%, #2563eb 100%);
    color: white;
    border: none;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  
  .chatgpt-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }
  
  .frac {
    display: inline-block;
    vertical-align: middle;
    text-align: center;
    margin: 0 3px;
  }
  
  .frac .num {
    display: block;
    padding: 1px 4px;
    border-bottom: 2px solid currentColor;
    line-height: 1.2;
    font-size: 0.95em;
  }
  
  .frac .den {
    display: block;
    padding: 1px 4px;
    line-height: 1.2;
    font-size: 0.95em;
  }
  
  .frac-lg {
    display: inline-block;
    vertical-align: middle;
    text-align: center;
    font-size: 1em;
    margin: 0 4px;
  }
  
  .frac-lg .num {
    display: block;
    padding: 3px 8px;
    border-bottom: 3px solid currentColor;
    font-weight: 700;
    line-height: 1.3;
  }
  
  .frac-lg .den {
    display: block;
    padding: 3px 8px;
    font-weight: 700;
    line-height: 1.3;
  }
  
  .note-image, .note-image-bordered {
    margin: 16px auto;
    text-align: center;
    max-width: 100%;
  }
  
  .note-image img, .note-image-bordered img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    display: block;
    margin: 0 auto;
  }
  
  .note-image-bordered img {
    border: 2px solid #028090;
    padding: 8px;
    background: white;
  }
  
  .image-caption {
    font-size: 12px;
    color: #116466;
    font-weight: 600;
    margin-top: 8px;
    font-style: italic;
    text-align: center;
  }
  
  .notes-container {
    max-width: 100%;
    margin: 0 auto;
    background: white;
    padding: 20px 4px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .notes-title {
    font-size: 22px;
    font-weight: 800;
    color: #023047;
    margin-bottom: 20px;
    text-align: center;
    border-bottom: 3px solid #028090;
    padding-bottom: 10px;
  }
  
  .note-segment {
    margin-bottom: 24px;
    padding: 16px 8px;
    background: #f9fafb;
    border-radius: 6px;
    border-left: 4px solid #028090;
    position: relative;
  }
  
  .note-segment .ai-btn {
    position: absolute;
    top: 12px;
    right: 8px;
  }
  
  .segment-heading {
    font-size: 17px;
    font-weight: 700;
    color: #116466;
    margin-bottom: 12px;
    padding-right: 40px;
  }
  
  .segment-subheading {
    font-size: 15px;
    font-weight: 700;
    color: #2a6f62;
    margin-top: 12px;
    margin-bottom: 8px;
  }
  
  .note-paragraph {
    font-size: 13px;
    line-height: 1.6;
    color: #1f2937;
    margin-bottom: 10px;
    text-align: justify;
  }
  
  .note-table {
    width: 100%;
    border-collapse: collapse;
    margin: 16px 0;
    background: white;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    font-size: 12px;
  }
  
  .note-table th {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 10px 8px;
    text-align: left;
    font-weight: 700;
    font-size: 12px;
  }
  
  .note-table td {
    padding: 10px 8px;
    border-bottom: 1px solid #e5e7eb;
    font-size: 12px;
    line-height: 1.5;
  }
  
  .note-table tr:last-child td {
    border-bottom: none;
  }
  
  .note-table tr:hover {
    background-color: #f9fafb;
  }
  
  .equation-box {
    background: linear-gradient(135deg, #e3f2fd, #bbdefb);
    border: 2px solid #2196f3;
    padding: 14px;
    margin: 14px 0;
    border-radius: 6px;
    text-align: center;
  }
  
  .equation-text {
    font-size: 15px;
    font-weight: 600;
    color: #0d47a1;
  }
  
  .definition-box {
    background: linear-gradient(135deg, #e3f2fd, #bbdefb);
    border-left: 4px solid #2196f3;
    padding: 12px 16px;
    margin: 12px 0;
    border-radius: 6px;
  }
  
  .definition-term {
    font-weight: 700;
    color: #0d47a1;
    font-size: 14px;
    margin-bottom: 6px;
  }
  
  .definition-text {
    color: #1565c0;
    line-height: 1.6;
    font-size: 13px;
  }
  
  .important-note {
    background: linear-gradient(135deg, #ffebee, #ffcdd2);
    border: 2px solid #f44336;
    padding: 12px 16px;
    margin: 12px 0;
    border-radius: 6px;
    font-size: 13px;
  }
  
  .important-note strong {
    color: #c62828;
  }
  
  .mcq-container {
    max-width: 700px;
    margin: 0 auto;
  }
  
  .score-display {
    background: linear-gradient(135deg, #0369a1 0%, #0284c7 50%, #0ea5e9 100%);
    color: white;
    padding: 12px 16px;
    border-radius: 8px;
    margin-bottom: 16px;
    text-align: center;
    font-weight: 700;
    font-size: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .reset-score-btn {
    background: #ff9800;
    color: #000000;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s;
  }
  
  .reset-score-btn:hover {
    background: #fb8c00;
  }
  
  .question-count {
    font-weight: 700;
    font-size: 15px;
    color: #116466;
    margin-bottom: 14px;
    border-left: 4px solid #028090;
    padding-left: 12px;
  }
  
  .question-item {
    background-color: #fff8f0;
    border-radius: 8px;
    border: 1.5px solid #f0c49c;
    margin-bottom: 20px;
    padding: 16px;
    font-size: 13px;
  }
  
  .question-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    gap: 8px;
  }
  
  .question-number {
    font-weight: 700;
    font-size: 16px;
    color: #2a6f62;
  }
  
  .question-text {
    font-weight: 600;
    font-size: 13px;
    color: #255c4d;
    margin-bottom: 12px;
    line-height: 1.6;
  }
  
  .options {
    margin-bottom: 14px;
  }
  
  .option {
    background-color: #ffffff;
    border-radius: 6px;
    border: 1.8px solid #b5d0c8;
    padding: 10px 14px;
    margin: 6px 0;
    font-weight: 500;
    font-size: 13px;
    color: #244636;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
  }
  
  .option:hover:not(.selected) {
    background-color: #e8f5f1;
    border-color: #71b280;
  }
  
  .option.selected.correct {
    background-color: #d4edda;
    border-color: #28a745;
  }
  
  .option.selected.wrong {
    background-color: #f8d7da;
    border-color: #dc3545;
  }
  
  .option.selected.correct::after {
    content: "‚úì";
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #28a745;
    font-weight: 700;
    font-size: 18px;
  }
  
  .option.selected.wrong::after {
    content: "‚úó";
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #dc3545;
    font-weight: 700;
    font-size: 18px;
  }
  
  .answer-display {
    background: linear-gradient(135deg, #d4edda, #c3e6cb);
    border: 2px solid #28a745;
    border-radius: 6px;
    padding: 12px;
    margin: 12px 0;
    font-size: 13px;
    font-weight: 600;
    color: #155724;
    display: none;
  }
  
  .answer-display.show {
    display: block;
  }
  
  .hint-display {
    background: linear-gradient(135deg, #fff3e0, #ffe0b2);
    border: 2px solid #ff9800;
    border-radius: 6px;
    padding: 12px;
    margin: 12px 0;
    font-size: 13px;
    font-weight: 600;
    color: #e65100;
    display: none;
  }
  
  .hint-display.show {
    display: block;
  }
  
  .button-group {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  
  .btn {
    padding: 8px 14px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 700;
    font-size: 13px;
    transition: all 0.3s;
  }
  
  .btn-answer {
    background-color: #047857;
    color: #ffffff;
  }
  
  .btn-answer:hover {
    background-color: #065f46;
  }
  
  .btn-hint {
    background-color: #dc2626;
    color: #ffffff;
  }
  
  .btn-hint:hover {
    background-color: #b91c1c;
  }
  
  .mark-badge {
    display: inline-block;
    padding: 5px 12px;
    border-radius: 16px;
    font-size: 11px;
    font-weight: 700;
    margin-left: 8px;
    vertical-align: middle;
  }
  
  .mark-1 { background: linear-gradient(135deg, #4caf50, #66bb6a); color: white; }
  .mark-2 { background: linear-gradient(135deg, #2196f3, #42a5f5); color: white; }
  .mark-3 { background: linear-gradient(135deg, #ff9800, #ffa726); color: white; }
  .mark-5 { background: linear-gradient(135deg, #f44336, #ef5350); color: white; }
  
  .qa-container {
    max-width: 100%;
    margin: 0 auto;
    padding: 0;
  }
  
  .qa-item {
    background: white;
    border-radius: 8px;
    padding: 14px 6px;
    margin-bottom: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    border-left: 4px solid #028090;
    position: relative;
  }
  
  .qa-item .ai-btn {
    position: absolute;
    top: 12px;
    right: 6px;
  }
  
  .qa-item.mark-1-item { border-left-color: #4caf50; }
  .qa-item.mark-2-item { border-left-color: #2196f3; }
  .qa-item.mark-3-item { border-left-color: #ff9800; }
  .qa-item.mark-5-item { border-left-color: #f44336; }
  
  .qa-question {
    font-size: 14px;
    font-weight: 700;
    color: #023047;
    margin-bottom: 14px;
    line-height: 1.6;
    padding-right: 40px;
  }
  
  .qa-question-number {
    display: inline-block;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 5px 12px;
    border-radius: 16px;
    font-size: 12px;
    margin-right: 8px;
    font-weight: 700;
  }
  
  .qa-answer-section {
    background: #f9fafb;
    padding: 12px 6px;
    border-radius: 6px;
    margin-top: 12px;
  }
  
  .qa-answer-label {
    font-weight: 700;
    color: #116466;
    font-size: 14px;
    margin-bottom: 10px;
    display: block;
  }
  
  .answer-1mark, .answer-2mark, .answer-3mark, .answer-5mark {
    padding: 10px 6px;
    border-radius: 6px;
    font-size: 13px;
    line-height: 1.6;
  }
  
  .answer-1mark {
    background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
    border-left: 3px solid #4caf50;
  }
  
  .answer-2mark {
    background: linear-gradient(135deg, #e3f2fd, #bbdefb);
    border-left: 3px solid #2196f3;
  }
  
  .answer-2mark .point {
    margin: 8px 0;
    padding-left: 18px;
    position: relative;
    font-size: 13px;
    line-height: 1.6;
  }
  
  .answer-2mark .point:before {
    content: "‚óè";
    position: absolute;
    left: 0;
    color: #2196f3;
    font-weight: 700;
  }
  
  .answer-3mark {
    background: linear-gradient(135deg, #fff3e0, #ffe0b2);
    border-left: 3px solid #ff9800;
  }
  
  .answer-3mark .point {
    margin: 10px 0;
    padding: 8px 6px;
    background: white;
    border-radius: 5px;
    font-size: 13px;
    line-height: 1.6;
  }
  
  .answer-3mark .point strong {
    color: #e65100;
  }
  
  .answer-5mark {
    background: linear-gradient(135deg, #ffebee, #ffcdd2);
    border-left: 3px solid #f44336;
  }
  
  .answer-5mark .section {
    margin: 10px 0;
    padding: 10px 8px;
    background: white;
    border-radius: 6px;
  }
  
  .answer-5mark .section h5 {
    margin: 0 0 8px 0;
    color: #c62828;
    font-size: 14px;
  }
  
  .answer-5mark .section p {
    margin: 6px 0;
    font-size: 13px;
    line-height: 1.6;
  }
  
  sub { font-size: 0.75em; vertical-align: sub; }
  sup { font-size: 0.75em; vertical-align: super; }
  
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 12px;
    justify-content: center;
    align-items: center;
  }
  
  .dropdown-group {
    min-width: 140px;
    flex: 1;
  }
  
  label {
    display: block;
    font-weight: 700;
    font-size: 13px;
    margin-bottom: 5px;
    color: #344e41;
  }
  
  select {
    width: 100%;
    padding: 8px 10px;
    border-radius: 6px;
    border: 2px solid #028090;
    font-size: 13px;
    background-color: #ffffff;
    color: #023047;
    transition: 0.3s;
  }
  
  select:focus {
    outline: none;
    border-color: #023047;
    background-color: #e0f7f4;
  }
  
  .reload-btn {
    cursor: pointer;
    background-color: #8b5cf6;
    border: none;
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    font-weight: 700;
    font-size: 12px;
    height: 34px;
    transition: all 0.3s;
  }
  
  .reload-btn:hover {
    background-color: #7c3aed;
  }
  
  .view-toggle {
    display: flex;
    gap: 10px;
    margin-bottom: 16px;
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .view-btn {
    padding: 8px 16px;
    border: 2px solid #028090;
    background: white;
    color: #023047;
    border-radius: 6px;
    font-weight: 700;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.3s;
  }
  
  .view-btn:hover, .view-btn.active {
    background: #028090;
    color: white;
  }
  
  .mark-filter {
    display: flex;
    gap: 6px;
    justify-content: center;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }
  
  .mark-filter-btn {
    padding: 6px 12px;
    border: 2px solid #e0e0e0;
    background: white;
    border-radius: 16px;
    cursor: pointer;
    font-weight: 600;
    font-size: 11px;
    transition: all 0.3s;
  }
  
  .mark-filter-btn:hover { border-color: #028090; }
  .mark-filter-btn.active { border-color: transparent; }
  
  .mark-filter-btn.filter-1.active { background: linear-gradient(135deg, #4caf50, #66bb6a); color: white; }
  .mark-filter-btn.filter-2.active { background: linear-gradient(135deg, #2196f3, #42a5f5); color: white; }
  .mark-filter-btn.filter-3.active { background: linear-gradient(135deg, #ff9800, #ffa726); color: white; }
  .mark-filter-btn.filter-5.active { background: linear-gradient(135deg, #f44336, #ef5350); color: white; }
  .mark-filter-btn.filter-all.active { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
  
  @media (max-width: 900px) {
    .header h1 { font-size: 2rem; }
    .header .subtitle { font-size: 14px; }
    .notes-container { padding: 16px 4px; }
    .qa-container { padding: 0; }
    .qa-item { padding: 14px 4px; }
    .qa-answer-section { padding: 10px 4px; }
    .answer-1mark, .answer-2mark, .answer-3mark, .answer-5mark { padding: 10px 4px; }
  }
</style>
</head>
<body>

<div class="header" role="banner">
  <h1>Educational Platform</h1>
  <div class="subtitle">Pagewise Notes, MCQs, Q&A</div>
</div>

<div class="controls">
  <div class="dropdown-group">
    <label for="chapterSelect">Chapter:</label>
    <select id="chapterSelect" onchange="updatePages()">
      <option value="">Select Chapter</option>
      <option value="1">Chapter 1</option>
      <option value="2">Chapter 2</option>
      <option value="3">Chapter 3</option>
      <option value="4">Chapter 4</option>
      <option value="5">Chapter 5</option>
      <option value="6">Chapter 6</option>
      <option value="7":>Chapter 7: Hello</option>
      <option value="8">Chapter 8</option>
      <option value="9">Chapter 9</option>
      <option value="10">Chapter 10</option>
    </select>
  </div>
  <div class="dropdown-group">
    <label for="pageSelect">Page:</label>
    <select id="pageSelect" onchange="loadPage()" disabled>
      <option value="">Select Page</option>
    </select>
  </div>
  <button class="reload-btn" onclick="window.location.reload()">‚Üª Reload</button>
</div>

<div class="view-toggle">
  <button class="view-btn active" onclick="switchView('mcq')">MCQs</button>
  <button class="view-btn" onclick="switchView('notes')">Notes</button>
  <button class="view-btn" onclick="switchView('qa')">Q&A</button>
</div>

<div id="mcqMode" class="mode-container">
  <div class="mcq-container">
    <div id="mcqContent">
      <p style="text-align:center; padding:40px; color:#666; font-size:14px;">Select a chapter and page to view MCQs</p>
    </div>
  </div>
</div>

<div id="notesMode" class="mode-container" style="display:none;">
  <div class="notes-container">
    <div id="notesContent">
      <p style="text-align:center; padding:40px; color:#666; font-size:14px;">Select a chapter and page to view notes</p>
    </div>
  </div>
</div>

<div id="qaMode" class="mode-container" style="display:none;">
  <h2 style="text-align:center; color:#023047; margin-bottom:20px; font-size:20px;">üìù Questions & Answers</h2>
  
  <div class="mark-filter">
    <button class="mark-filter-btn filter-all active" onclick="filterByMark('all')">All Questions</button>
    <button class="mark-filter-btn filter-1" onclick="filterByMark(1)">1 Mark</button>
    <button class="mark-filter-btn filter-2" onclick="filterByMark(2)">2 Marks</button>
    <button class="mark-filter-btn filter-3" onclick="filterByMark(3)">3 Marks</button>
    <button class="mark-filter-btn filter-5" onclick="filterByMark(5)">5 Marks</button>
  </div>
  
  <div class="qa-container">
    <div id="qaContent">
      <p style="text-align:center; padding:40px; color:#666; font-size:14px;">Select a chapter and page to view Q&A</p>
    </div>
  </div>
</div>

<script>
  function frac(numerator, denominator, large = false) {
    const cls = large ? 'frac-lg' : 'frac';
    return `<span class="${cls}"><span class="num">${numerator}</span><span class="den">${denominator}</span></span>`;
  }

  let pageScores = JSON.parse(localStorage.getItem('pageScores')) || {};

  const chapterData = {
    "1": {
      "1": { mcqData: [  // PASTE THIS IN mcqData: []
{ 
  question: "When magnesium (2,8,2) forms Mg¬≤‚Å∫ ion, how many electrons does it lose?", 
  options: ["a) 1 electron", "b) 2 electrons", "c) 3 electrons", "d) 8 electrons"], 
  correct: "b",
  hint: "Look at the electron configuration of magnesium (2,8,2). The outermost shell contains electrons that are lost during ion formation to achieve a stable noble gas configuration."
},
{ 
  question: "What is the electron configuration of chloride ion (Cl‚Åª) formed from chlorine atom with configuration (2,8,7)?", 
  options: ["a) 2,8,6", "b) 2,8,7", "c) 2,8,8", "d) 2,7,8"], 
  correct: "c",
  hint: "Chlorine gains one electron to complete its octet. Add the gained electron to the outermost shell of the neutral chlorine atom."
},
{ 
  question: "In the formation of MgCl‚ÇÇ, how many chlorine atoms combine with one magnesium atom?", 
  options: ["a) 1", "b) 2", "c) 3", "d) 4"], 
  correct: "b",
  hint: "Magnesium loses 2 electrons while each chlorine atom can gain only 1 electron. Calculate how many chlorine atoms are needed to accept all electrons from one magnesium atom."
},
{ 
  question: "According to Table 3.4, which ionic compound has the highest melting point?", 
  options: ["a) NaCl (1074 K)", "b) MgCl‚ÇÇ (981 K)", "c) CaCl‚ÇÇ (1045 K)", "d) CaO (2850 K)"], 
  correct: "d",
  hint: "Higher melting points indicate stronger ionic bonds. CaO contains smaller ions with higher charges, leading to stronger electrostatic attraction between Ca¬≤‚Å∫ and O¬≤‚Åª ions."
},
{ 
  question: "What type of compounds are formed by the transfer of electrons from a metal to a non-metal?", 
  options: ["a) Covalent compounds", "b) Ionic or electrovalent compounds", "c) Metallic compounds", "d) Molecular compounds"], 
  correct: "b",
  hint: "The page explicitly defines this category of compounds formed through electron transfer between metals and non-metals."
},
{ 
  question: "In Activity 3.13, why is a circuit with electrodes used to test salt solutions?", 
  options: ["a) To measure temperature", "b) To test electrical conductivity", "c) To dissolve the salt faster", "d) To change the color of solution"], 
  correct: "b",
  hint: "The circuit contains a bulb. If the solution conducts electricity, ions will carry current and the bulb will glow. This tests whether the solution can conduct electricity."
},
{ 
  question: "According to Table 3.4, what is the boiling point of sodium chloride (NaCl)?", 
  options: ["a) 1074 K", "b) 1686 K", "c) 887 K", "d) 1600 K"], 
  correct: "b",
  hint: "Look carefully at Table 3.4. There are two columns - melting point and boiling point. Make sure you're reading the correct column for NaCl."
},
{ 
  question: "Which solvent is most likely to dissolve ionic compounds according to Activity 3.13?", 
  options: ["a) Petrol", "b) Kerosene", "c) Water", "d) All equally"], 
  correct: "c",
  hint: "Ionic compounds are polar in nature. They dissolve in polar solvents. Among the three solvents mentioned, consider which one is polar."
}   ],
            notesData: [ // PASTE THIS IN notesData: []
{ 
  heading: "Formation of Magnesium Chloride (MgCl‚ÇÇ)", 
  content: `<div class="note-paragraph">Magnesium chloride is formed through electron transfer from magnesium atoms to chlorine atoms. This process demonstrates ionic bond formation between a metal and a non-metal.</div><div class="equation-box"><div class="equation-text">Mg (2,8,2) ‚Üí Mg¬≤‚Å∫ (2,8) + 2e‚Åª<br><br>Cl (2,8,7) + e‚Åª ‚Üí Cl‚Åª (2,8,8)<br><br>Since each Cl atom needs 1 electron:<br><br>2Cl (2,8,7) + 2e‚Åª ‚Üí 2Cl‚Åª (2,8,8)<br><br>Final compound formation:<br><br>Mg¬≤‚Å∫ + 2Cl‚Åª ‚Üí MgCl‚ÇÇ</div></div><div class="note-paragraph">Magnesium atom loses 2 electrons from its outermost shell to achieve stable configuration (2,8), forming Mg¬≤‚Å∫ cation. Each chlorine atom gains 1 electron to achieve stable octet configuration (2,8,8), forming Cl‚Åª anion. Two chlorine atoms are required to accept the 2 electrons donated by one magnesium atom.</div><div class="definition-box"><div class="definition-term">Ionic Compounds (Electrovalent Compounds)</div><div class="definition-text">The compounds formed by the transfer of electrons from a metal to a non-metal are known as ionic compounds or electrovalent compounds.</div></div>` 
},
{ 
  heading: "Properties of Ionic Compounds", 
  content: `<div class="note-paragraph">Ionic compounds exhibit characteristic properties due to the strong electrostatic forces of attraction between oppositely charged ions arranged in a regular crystal lattice structure.</div>` 
},
{ 
  heading: "Activity 3.13: Investigating Ionic Compound Properties", 
  content: `<div class="segment-subheading">Aim</div><div class="note-paragraph">To study the physical state, solubility, electrical conductivity, and thermal properties of ionic salts.</div><div class="segment-subheading">Materials Required</div><div class="note-paragraph">Sodium chloride, potassium iodide, barium chloride or other salts; metal spatula; Bunsen burner; water; petrol; kerosene; electrodes (graphite rods); battery; bulb; switch; beaker.</div><div class="segment-subheading">Procedure</div><div class="note-paragraph"><strong>Step 1:</strong> Observe the physical state of salt samples at room temperature.<br><br><strong>Step 2:</strong> Take a small amount of sample on a metal spatula and heat it directly on a flame (Refer to Figure 3.9). Observe if the samples impart any color to the flame.<br><br><strong>Step 3:</strong> Try to dissolve the salt samples separately in water, petrol, and kerosene. Note which solvents dissolve the salts.<br><br><strong>Step 4:</strong> Make a circuit as shown in Figure 3.8 with battery, switch, bulb, and two graphite rod electrodes. Insert the electrodes into a beaker containing salt solution. Observe the bulb and test other salt solutions similarly.</div><div class="segment-subheading">Expected Observations</div><div class="note-paragraph">‚Ä¢ All salt samples are in <strong>solid state</strong> at room temperature<br>‚Ä¢ Salts require <strong>high temperature</strong> to melt or decompose<br>‚Ä¢ Some salts may impart <strong>characteristic colors</strong> to the flame when heated<br>‚Ä¢ Salts dissolve readily in <strong>water</strong> but not in petrol or kerosene<br>‚Ä¢ When electrodes are inserted in salt solution, the <strong>bulb glows</strong>, indicating electrical conductivity</div><div class="important-note"><strong>Inference:</strong> Ionic compounds are solid at room temperature, have high melting points, dissolve in polar solvents like water, and conduct electricity in solution form because ions are free to move and carry electric current.</div>` 
},
{ 
  heading: "Melting and Boiling Points of Ionic Compounds", 
  content: `<div class="note-paragraph">Ionic compounds have characteristically high melting and boiling points due to strong electrostatic forces between oppositely charged ions in the crystal lattice. Large amounts of energy are required to overcome these forces and separate the ions.</div><table class="note-table"><thead><tr><th>Ionic Compound</th><th>Melting Point (K)</th><th>Boiling Point (K)</th></tr></thead><tbody><tr><td>NaCl</td><td>1074</td><td>1686</td></tr><tr><td>LiCl</td><td>887</td><td>1600</td></tr><tr><td>CaCl‚ÇÇ</td><td>1045</td><td>1900</td></tr><tr><td>CaO</td><td>2850</td><td>3120</td></tr><tr><td>MgCl‚ÇÇ</td><td>981</td><td>1685</td></tr></tbody></table><div class="highlight-box"><strong>Key Point:</strong> CaO has the highest melting point (2850 K) and boiling point (3120 K) among the listed compounds due to the strong ionic bond between Ca¬≤‚Å∫ and O¬≤‚Åª ions, which are both small in size with high charge density.</div>` 
}  ],
            qaData: [ // PASTE THIS IN qaData: []
{ 
  marks: 1, 
  question: "Name the cation and anion present in MgCl‚ÇÇ.", 
  answer: "The cation present in MgCl‚ÇÇ is Mg¬≤‚Å∫ (magnesium ion) and the anion is Cl‚Åª (chloride ion)." 
},
{ 
  marks: 1, 
  question: "What are ionic compounds also known as?", 
  answer: "Ionic compounds are also known as electrovalent compounds." 
},
{ 
  marks: 2, 
  question: "Explain the formation of magnesium ion (Mg¬≤‚Å∫) from magnesium atom.", 
  answer: `<div class="point"><strong>Electron Configuration:</strong> Magnesium atom has electron configuration (2,8,2) with 2 electrons in its outermost shell.</div><div class="point"><strong>Ion Formation:</strong> To achieve stable noble gas configuration, magnesium loses 2 electrons from its outermost shell, forming Mg¬≤‚Å∫ ion with configuration (2,8) and a positive charge of +2.</div>` 
},
{ 
  marks: 2, 
  question: "Why do ionic compounds have high melting and boiling points?", 
  answer: `<div class="point"><strong>Strong Electrostatic Forces:</strong> Ionic compounds consist of oppositely charged ions (cations and anions) held together by strong electrostatic forces of attraction in a rigid crystal lattice structure.</div><div class="point"><strong>Energy Requirement:</strong> Large amounts of energy are required to overcome these strong forces and separate the ions, resulting in high melting and boiling points. For example, CaO has a melting point of 2850 K.</div>` 
},
{ 
  marks: 3, 
  question: "Describe the formation of magnesium chloride (MgCl‚ÇÇ) with electron transfer equations.", 
  answer: `<div class="point"><strong>Step 1: Magnesium Ion Formation (1 mark)</strong><br>Magnesium atom (2,8,2) loses 2 electrons from its outermost shell to form Mg¬≤‚Å∫ cation:<br><br>Mg (2,8,2) ‚Üí Mg¬≤‚Å∫ (2,8) + 2e‚Åª</div><div class="point"><strong>Step 2: Chloride Ion Formation (1 mark)</strong><br>Each chlorine atom (2,8,7) gains 1 electron to form Cl‚Åª anion. Since magnesium loses 2 electrons, two chlorine atoms are needed:<br><br>2Cl (2,8,7) + 2e‚Åª ‚Üí 2Cl‚Åª (2,8,8)</div><div class="point"><strong>Step 3: Compound Formation (1 mark)</strong><br>The Mg¬≤‚Å∫ cation and two Cl‚Åª anions combine through electrostatic attraction to form magnesium chloride:<br><br>Mg¬≤‚Å∫ + 2Cl‚Åª ‚Üí MgCl‚ÇÇ<br><br>This is an ionic compound formed by electron transfer from metal to non-metal.</div>` 
},
{ 
  marks: 2, 
  question: "Why do ionic compounds conduct electricity in solution but not in solid state?", 
  answer: `<div class="point"><strong>Solid State:</strong> In solid state, ions are held in fixed positions in the crystal lattice and cannot move freely. Therefore, ionic compounds do not conduct electricity in solid state.</div><div class="point"><strong>Solution/Molten State:</strong> When dissolved in water or melted, ions become free to move. These mobile ions can carry electric current, making the solution or molten compound an electrical conductor. This is demonstrated in Activity 3.13 where the bulb glows in salt solution.</div>` 
},
{ 
  marks: 3, 
  question: "Based on Activity 3.13, describe the solubility behavior of ionic compounds in different solvents.", 
  answer: `<div class="point"><strong>Step 1: Solubility in Water (1 mark)</strong><br>Ionic compounds dissolve readily in water because water is a polar solvent. The partial positive charge on hydrogen atoms and partial negative charge on oxygen atoms in water molecules attract the ions, helping to separate them from the crystal lattice.</div><div class="point"><strong>Step 2: Insolubility in Non-polar Solvents (1 mark)</strong><br>Ionic compounds do not dissolve in non-polar solvents like petrol and kerosene. These solvents lack the polarity needed to overcome the strong electrostatic forces between ions in the crystal structure.</div><div class="point"><strong>Step 3: General Principle (1 mark)</strong><br>The solubility pattern follows the principle "like dissolves like" - polar ionic compounds dissolve in polar solvents (water) but not in non-polar solvents (petrol, kerosene). This property distinguishes ionic compounds from covalent compounds.</div>` 
},
{ 
  marks: 2, 
  question: "Compare the melting points of NaCl and CaO from Table 3.4. Why is there such a large difference?", 
  answer: `<div class="point"><strong>Melting Point Comparison:</strong> NaCl has a melting point of 1074 K, while CaO has a much higher melting point of 2850 K - nearly 2.7 times higher than NaCl.</div><div class="point"><strong>Reason for Difference:</strong> CaO has stronger ionic bonds because both Ca¬≤‚Å∫ and O¬≤‚Åª are doubly charged ions with high charge density and small ionic radii. This creates much stronger electrostatic attraction compared to NaCl (Na‚Å∫ and Cl‚Åª are singly charged), requiring significantly more energy to break the bonds during melting.</div>` 
}   ] },
      "2": { mcqData: [   ],
            notesData: [    ],
            qaData: [    ] },
      "3": { mcqData: [   ],
            notesData: [    ],
            qaData: [    ] },
      "4": { mcqData: [   ],
            notesData: [    ],
            qaData: [    ] },
      "5": { mcqData: [   ],
            notesData: [   ],
            qaData: [   ] },
      "6": { mcqData: [], notesData: [], qaData: [] },
      "7": { mcqData: [], notesData: [], qaData: [] },
      "8": { mcqData: [], notesData: [], qaData: [] },
      "9": { mcqData: [], notesData: [], qaData: [] },
      "10": { mcqData: [], notesData: [], qaData: [] }
    },
    "2": {
      "11": { mcqData: [], notesData: [], qaData: [] },
      "12": { mcqData: [], notesData: [], qaData: [] },
      "13": { mcqData: [], notesData: [], qaData: [] },
      "14": { mcqData: [], notesData: [], qaData: [] },
      "15": { mcqData: [], notesData: [], qaData: [] },
      "16": { mcqData: [], notesData: [], qaData: [] },
      "17": { mcqData: [], notesData: [], qaData: [] },
      "18": { mcqData: [], notesData: [], qaData: [] },
      "19": { mcqData: [], notesData: [], qaData: [] },
      "20": { mcqData: [], notesData: [], qaData: [] }
    },
    "3": {
      "21": { mcqData: [], notesData: [], qaData: [] },
      "22": { mcqData: [], notesData: [], qaData: [] },
      "23": { mcqData: [], notesData: [], qaData: [] },
      "24": { mcqData: [], notesData: [], qaData: [] },
      "125": { mcqData: [], notesData: [], qaData: [] },
      "26": { mcqData: [], notesData: [], qaData: [] },
      "27": { mcqData: [], notesData: [], qaData: [] },
      "28": { mcqData: [], notesData: [], qaData: [] },
      "29": { mcqData: [], notesData: [], qaData: [] },
      "30": { mcqData: [], notesData: [], qaData: [] }
    },
    "4": {
      "31": { mcqData: [], notesData: [], qaData: [] },
      "32": { mcqData: [], notesData: [], qaData: [] },
      "33": { mcqData: [], notesData: [], qaData: [] },
      "34": { mcqData: [], notesData: [], qaData: [] },
      "35": { mcqData: [], notesData: [], qaData: [] },
      "36": { mcqData: [], notesData: [], qaData: [] },
      "37": { mcqData: [], notesData: [], qaData: [] },
      "38": { mcqData: [], notesData: [], qaData: [] },
      "39": { mcqData: [], notesData: [], qaData: [] },
      "40": { mcqData: [], notesData: [], qaData: [] }
    },
    "5": {
      "41": { mcqData: [], notesData: [], qaData: [] },
      "42": { mcqData: [], notesData: [], qaData: [] },
      "43": { mcqData: [], notesData: [], qaData: [] },
      "44": { mcqData: [], notesData: [], qaData: [] },
      "45": { mcqData: [], notesData: [], qaData: [] },
      "46": { mcqData: [], notesData: [], qaData: [] },
      "47": { mcqData: [], notesData: [], qaData: [] },
      "48": { mcqData: [], notesData: [], qaData: [] },
      "49": { mcqData: [], notesData: [], qaData: [] },
      "50": { mcqData: [], notesData: [], qaData: [] }
    },
    "6": {
      "51": { mcqData: [], notesData: [], qaData: [] },
      "52": { mcqData: [], notesData: [], qaData: [] },
      "53": { mcqData: [], notesData: [], qaData: [] },
      "54": { mcqData: [], notesData: [], qaData: [] },
      "55": { mcqData: [], notesData: [], qaData: [] },
      "56": { mcqData: [], notesData: [], qaData: [] },
      "57": { mcqData: [], notesData: [], qaData: [] },
      "58": { mcqData: [], notesData: [], qaData: [] },
      "59": { mcqData: [], notesData: [], qaData: [] },
      "60": { mcqData: [], notesData: [], qaData: [] }
    },
    "7": {
      "61": { 
        mcqData: [
          { 
            question: "The electronic configuration of Aluminium is 2, 8, 3. How many electrons are present in the M shell?", 
            options: ["a) 2", "b) 8", "c) 3", "d) 13"], 
            correct: "c",
            hint: "Look at the third number in the electronic configuration. The shells are labeled K, L, M in order."
          },
          { 
            question: "Which noble gas has the electronic configuration 2, 8, 8?", 
            options: ["a) Helium", "b) Neon", "c) Argon", "d) Krypton"], 
            correct: "c",
            hint: "Count the total number of electrons (2+8+8=18). The element with atomic number 18 is this noble gas."
          },
          { 
            question: "Sodium atom loses one electron to form sodium cation. The electronic configuration of Na‚Å∫ is:", 
            options: ["a) 2, 8, 1", "b) 2, 8", "c) 2, 7", "d) 2, 8, 2"], 
            correct: "b",
            hint: "Sodium starts with 2, 8, 1. When it loses one electron from the outermost shell, what remains?"
          },
          { 
            question: "Chlorine gains one electron to form chloride anion. The electronic configuration of Cl‚Åª is:", 
            options: ["a) 2, 8, 7", "b) 2, 7, 8", "c) 2, 8, 6", "d) 2, 8, 8"], 
            correct: "d",
            hint: "Chlorine has 2, 8, 7. When it gains one electron in the M shell, the M shell will have 7+1 electrons."
          },
          { 
            question: "Which element has 17 protons and 18 electrons?", 
            options: ["a) Chlorine atom", "b) Chloride ion", "c) Argon atom", "d) Sodium cation"], 
            correct: "b",
            hint: "An element is identified by the number of protons. If electrons > protons, it's a negative ion (anion)."
          }
        ],
        notesData: [
          { heading: "Introduction to Electronic Configuration", content: `<div class="note-paragraph">Electronic configuration represents the arrangement of electrons in different shells around the nucleus of an atom. The shells are designated as K, L, M, N and can hold a maximum number of electrons according to the formula 2n¬≤, where n is the shell number.</div><div class="definition-box"><div class="definition-term">Electronic Configuration</div><div class="definition-text">The distribution of electrons in an atom among the available shells K, L, M, N surrounding the nucleus.</div></div>` },
          { heading: "Maximum Electrons in Each Shell", content: `<table class="note-table"><thead><tr><th>Shell Name</th><th>Shell Number (n)</th><th>Maximum Electrons (2n¬≤)</th></tr></thead><tbody><tr><td>K</td><td>1</td><td>2</td></tr><tr><td>L</td><td>2</td><td>8</td></tr><tr><td>M</td><td>3</td><td>18</td></tr><tr><td>N</td><td>4</td><td>32</td></tr></tbody></table><div class="important-note"><strong>Important:</strong> The outermost shell can hold a maximum of 8 electrons, even if the formula allows more.</div>` },
          { heading: "Electronic Configuration of Elements", content: `<table class="note-table"><thead><tr><th>Type</th><th>Element</th><th>Atomic No</th><th>K</th><th>L</th><th>M</th><th>N</th></tr></thead><tbody><tr><td rowspan="3"><strong>Noble Gases</strong></td><td>Helium (He)</td><td>2</td><td>2</td><td>-</td><td>-</td><td>-</td></tr><tr><td>Neon (Ne)</td><td>10</td><td>2</td><td>8</td><td>-</td><td>-</td></tr><tr><td>Argon (Ar)</td><td>18</td><td>2</td><td>8</td><td>8</td><td>-</td></tr><tr><td rowspan="5"><strong>Metals</strong></td><td>Sodium (Na)</td><td>11</td><td>2</td><td>8</td><td>1</td><td>-</td></tr><tr><td>Magnesium (Mg)</td><td>12</td><td>2</td><td>8</td><td>2</td><td>-</td></tr><tr><td>Aluminium (Al)</td><td>13</td><td>2</td><td>8</td><td>3</td><td>-</td></tr><tr><td>Potassium (K)</td><td>19</td><td>2</td><td>8</td><td>8</td><td>1</td></tr><tr><td>Calcium (Ca)</td><td>20</td><td>2</td><td>8</td><td>8</td><td>2</td></tr><tr><td rowspan="6"><strong>Non-Metals</strong></td><td>Nitrogen (N)</td><td>7</td><td>2</td><td>5</td><td>-</td><td>-</td></tr><tr><td>Oxygen (O)</td><td>8</td><td>2</td><td>6</td><td>-</td><td>-</td></tr><tr><td>Fluorine (F)</td><td>9</td><td>2</td><td>7</td><td>-</td><td>-</td></tr><tr><td>Phosphorus (P)</td><td>15</td><td>2</td><td>8</td><td>5</td><td>-</td></tr><tr><td>Sulphur (S)</td><td>16</td><td>2</td><td>8</td><td>6</td><td>-</td></tr><tr><td>Chlorine (Cl)</td><td>17</td><td>2</td><td>8</td><td>7</td><td>-</td></tr></tbody></table>` },
          { heading: "Formation of Ions", content: `<div class="segment-subheading">Cation Formation</div><div class="note-paragraph">Metals lose electrons from their outermost shell to attain stable noble gas configuration. The atom becomes positively charged after losing electrons.</div><div class="equation-box"><div class="equation-text">Na ‚Üí Na‚Å∫ + e‚Åª<br>2, 8, 1 ‚Üí 2, 8<br><span style="font-size:11px; color:#666;">Sodium cation</span></div></div><div class="segment-subheading">Anion Formation</div><div class="note-paragraph">Non-metals gain electrons in their outermost shell to complete their octet and attain stable noble gas configuration. The atom becomes negatively charged after gaining electrons.</div><div class="equation-box"><div class="equation-text">Cl + e‚Åª ‚Üí Cl‚Åª<br>2, 8, 7 ‚Üí 2, 8, 8<br><span style="font-size:11px; color:#666;">Chloride anion</span></div></div>` }
        ],
        qaData: [
          { marks: 1, question: "What is electronic configuration?", answer: "Electronic configuration is the distribution or arrangement of electrons in different shells K, L, M, N around the nucleus of an atom." },
          { marks: 2, question: "Write the electronic configuration of sodium and chlorine. How do they form ions?", answer: `<div class="point"><strong>Electronic Configuration:</strong> Sodium (Na) has atomic number 11 with configuration 2, 8, 1. Chlorine (Cl) has atomic number 17 with configuration 2, 8, 7.</div><div class="point"><strong>Ion Formation:</strong> Sodium loses one electron to form Na‚Å∫ (2, 8). Chlorine gains one electron to form Cl‚Åª (2, 8, 8). Both attain stable noble gas configuration.</div>` },
          { marks: 3, question: "Explain the formation of sodium chloride with electronic configuration.", answer: `<div class="point"><strong>Step 1: Initial Configuration (¬Ω mark)</strong><br>Sodium (Na) has electronic configuration 2, 8, 1<br>Chlorine (Cl) has electronic configuration 2, 8, 7</div><div class="point"><strong>Step 2: Electron Transfer (1¬Ω marks)</strong><br>Sodium atom loses one electron from M shell to form Na‚Å∫ cation with configuration 2, 8. Chlorine atom gains one electron in M shell to form Cl‚Åª anion with configuration 2, 8, 8. Both ions attain stable noble gas configuration.</div><div class="point"><strong>Step 3: Ionic Bond Formation (1 mark)</strong><br>Na‚Å∫ and Cl‚Åª ions are oppositely charged and attract each other by strong electrostatic forces to form sodium chloride (NaCl). It exists as aggregates of ions, not molecules.</div>` }
        ]
      },
      "62": { mcqData: [], notesData: [], qaData: [] },
      "63": { mcqData: [], notesData: [], qaData: [] },
      "64": { mcqData: [], notesData: [], qaData: [] },
      "65": { mcqData: [], notesData: [], qaData: [] },
      "66": { mcqData: [], notesData: [], qaData: [] },
      "67": { mcqData: [], notesData: [], qaData: [] },
      "68": { mcqData: [], notesData: [], qaData: [] },
      "69": { mcqData: [], notesData: [], qaData: [] },
      "70": { mcqData: [], notesData: [], qaData: [] }
    },
    "8": {
      "71": { mcqData: [], notesData: [], qaData: [] },
      "72": { mcqData: [], notesData: [], qaData: [] },
      "73": { mcqData: [], notesData: [], qaData: [] },
      "74": { mcqData: [], notesData: [], qaData: [] },
      "75": { mcqData: [], notesData: [], qaData: [] },
      "76": { mcqData: [], notesData: [], qaData: [] },
      "77": { mcqData: [], notesData: [], qaData: [] },
      "78": { mcqData: [], notesData: [], qaData: [] },
      "79": { mcqData: [], notesData: [], qaData: [] },
      "80": { mcqData: [], notesData: [], qaData: [] }
    },
    "9": {
      "81": { mcqData: [], notesData: [], qaData: [] },
      "82": { mcqData: [], notesData: [], qaData: [] },
      "83": { mcqData: [], notesData: [], qaData: [] },
      "84": { mcqData: [], notesData: [], qaData: [] },
      "85": { mcqData: [], notesData: [], qaData: [] },
      "86": { mcqData: [], notesData: [], qaData: [] },
      "87": { mcqData: [], notesData: [], qaData: [] },
      "88": { mcqData: [], notesData: [], qaData: [] },
      "89": { mcqData: [], notesData: [], qaData: [] },
      "90": { mcqData: [], notesData: [], qaData: [] }
    },
    "10": {
      "91": { mcqData: [], notesData: [], qaData: [] },
      "92": { mcqData: [], notesData: [], qaData: [] },
      "93": { mcqData: [], notesData: [], qaData: [] },
      "94": { mcqData: [], notesData: [], qaData: [] },
      "95": { mcqData: [], notesData: [], qaData: [] },
      "96": { mcqData: [], notesData: [], qaData: [] },
      "97": { mcqData: [], notesData: [], qaData: [] },
      "98": { mcqData: [], notesData: [], qaData: [] },
      "99": { mcqData: [], notesData: [], qaData: [] },
      "100": { mcqData: [], notesData: [], qaData: [] }
    }
  };

  let currentView = 'mcq', currentChapter = '', currentPage = '', currentFilter = 'all';

  function updatePages() {
    const chapterSelect = document.getElementById('chapterSelect').value;
    const pageSelect = document.getElementById('pageSelect');
    currentChapter = chapterSelect;
    currentPage = '';
    pageSelect.innerHTML = '<option value="">Select Page</option>';
    clearAllContent();
    
    if (chapterSelect && chapterData[chapterSelect]) {
      const pageNumbers = Object.keys(chapterData[chapterSelect]).sort((a, b) => parseInt(a) - parseInt(b));
      
      pageNumbers.forEach(pageNum => {
        const option = document.createElement('option');
        option.value = pageNum;
        option.textContent = `Page ${pageNum}`;
        pageSelect.appendChild(option);
      });
      
      pageSelect.disabled = pageNumbers.length === 0;
    } else {
      pageSelect.disabled = true;
    }
  }

  function clearAllContent() {
    const emptyMsg = '<p style="text-align:center; padding:40px; color:#666; font-size:14px;">Select a chapter and page to view content</p>';
    document.getElementById('mcqContent').innerHTML = emptyMsg;
    document.getElementById('notesContent').innerHTML = emptyMsg;
    document.getElementById('qaContent').innerHTML = emptyMsg;
  }

  function loadPage() {
    const pageSelect = document.getElementById('pageSelect').value;
    currentPage = pageSelect;
    clearAllContent();
    
    if (currentChapter && currentPage) {
      const pageData = chapterData[currentChapter]?.[currentPage];
      
      if (pageData) {
        if (pageData.mcqData?.length) renderMCQ(pageData.mcqData);
        else document.getElementById('mcqContent').innerHTML = '<p style="text-align:center; padding:40px; color:#666; font-size:14px;">No MCQs available for this page yet</p>';
        
        if (pageData.notesData?.length) renderNotes(pageData.notesData);
        else document.getElementById('notesContent').innerHTML = '<p style="text-align:center; padding:40px; color:#666; font-size:14px;">No notes available for this page yet</p>';
        
        if (pageData.qaData?.length) renderQA(pageData.qaData);
        else document.getElementById('qaContent').innerHTML = '<p style="text-align:center; padding:40px; color:#666; font-size:14px;">No Q&A available for this page yet</p>';
      }
    }
  }

  function renderMCQ(mcqs) {
    const pageKey = `${currentChapter}-${currentPage}`;
    const score = pageScores[pageKey] || 0;
    let html = `<div class="score-display"><span>Score: ${score}/${mcqs.length}</span><button class="reset-score-btn" onclick="resetScore()">Reset Score</button></div>`;
    html += `<div class="question-count">Questions: ${mcqs.length}</div>`;
    mcqs.forEach((q, idx) => {
      const fullQuestion = `Question:\n${q.question}\n\nOptions:\n${q.options.join('\n')}`;
      html += `<div class="question-item">
        <div class="question-header">
          <div class="question-number">Q${idx + 1}</div>
          <button class="chatgpt-btn" onclick="openAI(\`${escapeForJS(fullQuestion)}\`)">ChatGPT</button>
        </div>
        <div class="question-text">${q.question}</div>
        <div class="options">`;
      
      q.options.forEach(opt => {
        const optLetter = opt.charAt(0);
        html += `<div class="option" onclick="checkAnswer(this, '${q.correct}', '${optLetter}')">${opt}</div>`;
      });
      
      html += `</div>
        <div class="answer-display" id="answer-${idx}">
          <strong>Correct Answer:</strong> ${q.options.find(o => o.startsWith(q.correct))}
        </div>
        <div class="hint-display" id="hint-${idx}">
          <strong>üí° Hint:</strong> ${q.hint || "No hint available"}
        </div>
        <div class="button-group">
          <button class="btn btn-answer" onclick="toggleAnswer(${idx})">Show Answer</button>
          <button class="btn btn-hint" onclick="toggleHint(${idx})">Show Hint</button>
        </div>
      </div>`;
    });
    
    document.getElementById('mcqContent').innerHTML = html;
  }

  function toggleAnswer(idx) {
    const answerBox = document.getElementById(`answer-${idx}`);
    const button = event.target;
    
    if (answerBox.classList.contains('show')) {
      answerBox.classList.remove('show');
      button.textContent = 'Show Answer';
    } else {
      answerBox.classList.add('show');
      button.textContent = 'Hide Answer';
    }
  }

  function toggleHint(idx) {
    const hintBox = document.getElementById(`hint-${idx}`);
    const button = event.target;
    
    if (hintBox.classList.contains('show')) {
      hintBox.classList.remove('show');
      button.textContent = 'Show Hint';
    } else {
      hintBox.classList.add('show');
      button.textContent = 'Hide Hint';
    }
  }

  function renderNotes(notes) {
    const notesTitle = `<div class="notes-title">üìö Chapter ${currentChapter} Page ${currentPage}</div>`;
    let html = notesTitle;
    notes.forEach((note, idx) => {
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = note.content;
      const sections = [];
      const contentBlocks = tempDiv.querySelectorAll('.note-paragraph, .definition-box, .equation-box, .important-note, .highlight-box, table, .note-image, .note-image-bordered');
      contentBlocks.forEach(block => {
        sections.push(stripHtml(block.innerHTML).trim());
      });
      const noteText = `${note.heading}\n\n${sections.join('\n\n')}`;
      html += `<div class="note-segment"><button class="ai-btn" onclick="openAI(\`${escapeForJS(noteText)}\`)">AI</button><div class="segment-heading">${note.heading}</div>${note.content}</div>`;
    });
    document.getElementById('notesContent').innerHTML = html;
  }

  function renderQA(qas) {
    let html = `<p style="text-align:center; color:#666; margin-bottom:20px; font-size:13px;">Chapter ${currentChapter} Page ${currentPage} | Total: ${qas.length} Questions</p>`;
    qas.forEach((qa, idx) => {
      const cleanAnswer = stripHtml(qa.answer).replace(/\n+/g, '\n\n');
      const qaText = `Question:\n${qa.question}\n\nAnswer:\n${cleanAnswer}`;
      const markClass = `mark-${qa.marks}-item`;
      html += `<div class="qa-item ${markClass}" data-mark="${qa.marks}"><button class="ai-btn" onclick="openAI(\`${escapeForJS(qaText)}\`)">AI</button><div class="qa-question"><span class="qa-question-number">Q${idx + 1}</span>${qa.question}<span class="mark-badge mark-${qa.marks}">${qa.marks} Mark${qa.marks > 1 ? 's' : ''}</span></div><div class="qa-answer-section"><span class="qa-answer-label">‚úçÔ∏è Answer:</span><div class="answer-${qa.marks}mark">${qa.answer}</div></div></div>`;
    });
    document.getElementById('qaContent').innerHTML = html;
  }

  function checkAnswer(element, correct, selected) {
    const questionItem = element.closest('.question-item');
    const allOptions = questionItem.querySelectorAll('.option');
    if (element.classList.contains('selected')) return;
    allOptions.forEach(opt => { opt.style.pointerEvents = 'none'; });
    element.classList.add('selected');
    if (selected === correct) { element.classList.add('correct'); updateScore(1); }
    else { element.classList.add('wrong'); }
  }

  function updateScore(points) {
    const pageKey = `${currentChapter}-${currentPage}`;
    pageScores[pageKey] = (pageScores[pageKey] || 0) + points;
    localStorage.setItem('pageScores', JSON.stringify(pageScores));
    const scoreDisplay = document.querySelector('.score-display span');
    if (scoreDisplay) {
      const totalQuestions = chapterData[currentChapter][currentPage].mcqData.length;
      scoreDisplay.textContent = `Score: ${pageScores[pageKey]}/${totalQuestions}`;
    }
  }

  function resetScore() {
    const pageKey = `${currentChapter}-${currentPage}`;
    pageScores[pageKey] = 0;
    localStorage.setItem('pageScores', JSON.stringify(pageScores));
    loadPage();
  }

  function openAI(text) {
    const encodedText = encodeURIComponent(text);
    window.open(`https://chat.openai.com/?q=${encodedText}`, '_blank');
  }

  function stripHtml(html) {
    const tmp = document.createElement('div');
    tmp.innerHTML = html;
    return tmp.textContent || tmp.innerText || '';
  }

  function escapeForJS(text) {
    return text.replace(/\\/g, '\\\\').replace(/`/g, '\\`').replace(/\$/g, '\\$').replace(/\n/g, '\\n');
  }

  function switchView(view) {
    currentView = view;
    document.getElementById('mcqMode').style.display = view === 'mcq' ? 'block' : 'none';
    document.getElementById('notesMode').style.display = view === 'notes' ? 'block' : 'none';
    document.getElementById('qaMode').style.display = view === 'qa' ? 'block' : 'none';
    document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
  }

  function filterByMark(mark) {
    currentFilter = mark;
    document.querySelectorAll('.mark-filter-btn').forEach(btn => btn.classList.remove('active'));
    if (mark === 'all') { document.querySelector('.filter-all').classList.add('active'); }
    else { document.querySelector(`.filter-${mark}`).classList.add('active'); }
    document.querySelectorAll('.qa-item').forEach(item => {
      if (mark === 'all') { item.style.display = 'block'; }
      else {
        const itemMark = item.getAttribute('data-mark');
        item.style.display = itemMark == mark ? 'block' : 'none';
      }
    });
  }
</script>
</body>
</html>
