<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NEET-PYQ</title>
<style>
  body {
    font-family: 'Montserrat', Arial, sans-serif;
    margin: 0;
    padding: 20px 24px;
    background-color: #f9fafb;
    color: #1f2937;
    overflow-x: hidden;
  }
  .header {
    text-align: left;
    background-color: #023047;
    color: #ffb347;
    padding: 48px 24px 32px 24px;
    border-radius: 10px;
    margin-bottom: 32px;
    position: relative;
    overflow: hidden;
  }
  .header::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle at center, #4f59b0 0%, transparent 70%);
    opacity: 0.3;
    pointer-events: none;
  }
  .header h1 {
    position: relative;
    margin: 0 0 12px 0;
    font-size: 3rem;
    font-weight: 900;
    letter-spacing: 2px;
    line-height: 1.1;
    transform: none !important;
    color: #ffa726;
    max-width: 100%;
    white-space: nowrap;
  }
  .header .subtitle {
    position: relative;
    font-size: 18px;
    font-weight: 600;
    color: #b9fbc0;
    letter-spacing: 0.6px;
  }
  .note {
    max-width: 720px;
    margin: 0 auto 24px auto;
    font-style: italic;
    font-size: 14px;
    color: #4b6650;
    background-color: #d7e7d0;
    border-left: 6px solid #a8c77a;
    padding: 12px 20px;
    border-radius: 8px;
  }
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 18px;
    margin-bottom: 16px;
    justify-content: center;
    align-items: center;
  }
  .class-reload-group {
    display: flex;
    gap: 8px;
    align-items: flex-end;
    min-width: 180px;
    flex: 1;
  }
  .dropdown-group {
    min-width: 180px;
    flex: 1;
  }
  .class-dropdown-part {
    flex: 1;
  }
  label {
    display: block;
    font-weight: 700;
    font-size: 15px;
    margin-bottom: 6px;
    color: #344e41;
  }
  select {
    width: 100%;
    padding: 10px 14px;
    border-radius: 8px;
    border: 2px solid #028090;
    font-size: 15px;
    background-color: #ffffff;
    color: #023047;
    transition: 0.3s;
  }
  select:focus {
    outline: none;
    border-color: #023047;
    background-color: #e0f7f4;
  }
  .reload-btn {
    cursor: pointer;
    background-color: #8b5cf6;
    border: none;
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    font-weight: 700;
    font-size: 12px;
    transition: background-color 0.3s ease;
    display: flex;
    align-items: center;
    gap: 4px;
    height: 36px;
    white-space: nowrap;
  }
  .reload-btn:hover {
    background-color: #7c3aed;
  }
  #scoreWrapper {
    display: flex;
    align-items: center;
    margin-left: 12px;
  }
  #scoreCard {
    display: flex;
    align-items: center;
    font-weight: 700;
    font-size: 18px;
    color: #116466;
    border-left: 5px solid #028090;
    padding-left: 14px;
    white-space: nowrap;
  }
  .refreshBtn {
    cursor: pointer;
    background-color: #0d6efd;
    border: none;
    color: #fff;
    padding: 4px 10px;
    border-radius: 7px;
    font-weight: 700;
    font-size: 13px;
    transition: background-color 0.3s ease;
    margin-left: 8px;
    height: 32px;
    line-height: 24px;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .refreshBtn:hover {
    background-color: #084298;
  }
  .content-area {
    background-color: #fff1e0;
    padding: 28px 30px;
    border-radius: 12px;
    min-height: 300px;
    color: #1f2937;
    transition: background-color 0.4s ease;
    max-width: 900px;
    margin: 0 auto 30px auto;
  }
  .question-count {
    font-weight: 700;
    font-size: 18px;
    color: #116466;
    margin-bottom: 18px;
    border-left: 5px solid #028090;
    padding-left: 14px;
  }
  .question-item {
    background-color: #fff8f0;
    border-radius: 12px;
    border: 1.5px solid #f0c49c;
    margin-bottom: 26px;
    padding: 20px 24px;
    font-size: 15px;
    max-width: 100%;
    position: relative;
  }
  .question-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
    gap: 12px;
    flex-wrap: wrap;
  }
  .question-number {
    font-weight: 700;
    font-size: 18px;
    color: #2a6f62;
  }
  .question-year {
    background-color: #116466;
    color: #e0f7f4;
    padding: 5px 14px;
    border-radius: 16px;
    font-weight: 600;
    font-size: 13px;
    letter-spacing: 0.6px;
    white-space: nowrap;
  }
  .question-text {
    font-weight: 600;
    font-size: 15px;
    color: #255c4d;
    margin-bottom: 14px;
    max-width: 100%;
    word-wrap: break-word;
    word-break: break-word;
  }
  .options {
    margin-bottom: 18px;
  }
  .option {
    background-color: #ffffff;
    border-radius: 6px;
    border: 1.8px solid #b5d0c8;
    padding: 11px 18px;
    margin: 8px 0;
    font-weight: 500;
    font-size: 15px;
    color: #244636;
    cursor: pointer;
    transition: background-color 0.3s, border-color 0.3s, color 0.3s;
    user-select: none;
    position: relative;
    overflow: visible;
  }
  .option:hover:not(.disabled):not(.answered-correct):not(.answered-incorrect) {
    background-color: #dceddb;
    border-color: #71b280;
  }
  .option.answered-correct {
    background-color: rgba(25, 135, 84, 0.25);
    border: 3px solid #198754;
    color: #0d4b21;
    font-weight: 700;
    cursor: default;
  }
  .option.answered-incorrect {
    background-color: rgba(220, 53, 69, 0.25);
    border: 3px solid #dc3545;
    color: #721c24;
    font-weight: 700;
    cursor: default;
  }
  .option.disabled {
    cursor: default;
    opacity: 0.8;
  }
  .answer-popup {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: flex;
    opacity: 0.95;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: 900;
    border-radius: 6px;
    z-index: 5;
    pointer-events: none;
    animation: popup-fade 1.2s forwards;
  }
  .answer-popup.correct {
    background-color: rgba(25, 135, 84, 0.25);
    color: #18763b;
  }
  .answer-popup.incorrect {
    background-color: rgba(220, 53, 69, 0.2);
    color: #b02a37;
  }
  @keyframes popup-fade {
    0% { opacity: 0; }
    10% { opacity: 1;}
    80% { opacity: 0.95;}
    100% { opacity: 0; }
  }
  .button-group {
    display: flex;
    gap: 14px;
    flex-wrap: wrap;
    margin-bottom: 8px;
  }
  .btn {
    padding: 11px 18px;
    border: none;
    border-radius: 7px;
    cursor: pointer;
    font-weight: 700;
    font-size: 15px;
    color: #f0f0f0;
    transition: background-color 0.3s ease;
  }
  .btn-answer {
    background-color: #198754;
  }
  .btn-answer:hover {
    background-color: #146c43;
  }
  .btn-copy {
    background-color: #0d6efd;
  }
  .btn-copy:hover {
    background-color: #084298;
  }
  .chatgpt-btn {
    padding: 11px 18px;
    border: none;
    border-radius: 7px;
    cursor: pointer;
    font-weight: 700;
    font-size: 15px;
    color: #ffffff;
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    transition: all 0.3s ease;
  }
  .chatgpt-btn:hover {
    background: linear-gradient(135deg, #c0392b, #a93226);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
  }
  .answer-reveal {
    display: none;
    margin-top: 14px;
    background: #c7ddfa;
    border: 2px solid #3b82f6;
    border-radius: 10px;
    color: #1e40af;
    padding: 14px 18px;
    font-weight: 700;
  }
  .tick-cross-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 80px;
    font-weight: 900;
    z-index: 1000;
    pointer-events: none;
    animation: tick-cross-fade 1.5s forwards;
  }
  .tick-cross-popup.correct {
    color: #198754;
  }
  .tick-cross-popup.incorrect {
    color: #dc3545;
  }
  @keyframes tick-cross-fade {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
    40% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
  }
  .copy-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #27ae60, #229954);
    color: white;
    padding: 16px 24px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
    z-index: 10000;
    font-weight: 700;
    font-size: 15px;
    animation: slideIn 0.3s ease-out;
  }
  @keyframes slideIn {
    from {
      transform: translateX(400px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  .no-questions {
    text-align: center;
    font-style: italic;
    color: #4a5768;
    font-size: 17px;
    padding: 48px 10px;
  }
  @media (max-width: 900px) {
    .controls { 
      flex-direction: column; 
      align-items: stretch;
    }
    .dropdown-group { 
      min-width: unset; 
      width: 100%;
    }
    .class-reload-group {
      min-width: unset;
      width: 100%;
      flex-direction: row;
    }
    .class-dropdown-part {
      flex: 1;
    }
    .reload-btn {
      margin-left: 8px;
      flex-shrink: 0;
    }
    .header h1 {
      padding-left: 8px;
      padding-right: 8px;
      margin-left: 0;
      max-width: 320px;
      white-space: normal;
    }
    .content-area {
      max-width: 100%;
      padding: 20px 16px;
      min-height: 300px;
    }
    .question-item {
      max-width: 100%;
      padding: 18px 12px;
    }
    .question-text {
      font-size: 15px;
    }
  }

  .summary-toggle-btn {
    background: linear-gradient(135deg, #d2691e, #a0522d);
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 12px 24px;
    font-weight: 800;
    font-size: 16px;
    margin-bottom: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(210, 105, 30, 0.4);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .summary-toggle-btn:hover {
    background: linear-gradient(135deg, #cd5c2e, #8b4513);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(210, 105, 30, 0.5);
  }
  .summary-content {
    display: none;
    background-color: #fff8f0;
    border-left: 6px solid #d2691e;
    border-radius: 10px;
    padding: 18px 22px;
    color: #1f2937;
    margin-bottom: 20px;
    font-size: 15px;
    line-height: 1.7;
    box-shadow: 0 2px 8px rgba(210, 105, 30, 0.15);
  }
  .summary-content.show {
    display: block;
  }
</style>
</head>
<body>
<div class="header" role="banner">
  <h1>NEET-PYQ</h1>
  <div class="subtitle">NEET/AIPMT Biology Page Wise Analysis (1988-2025)</div>
</div>

<div class="note" role="note">
  <em>Note: Some questions from a particular page may appear in subsequent pages because the concept of the question may span multiple pages.</em>
</div>

<div class="controls" role="region" aria-label="Filtering controls">
  <div class="class-reload-group">
    <div class="class-dropdown-part">
      <label for="classSelect">Class:</label>
      <select id="classSelect" onchange="updateChapters()">
        <option value="">Select Class</option>
        <option value="11">Class 11</option>
        <option value="12">Class 12</option>
      </select>
    </div>
    <button class="reload-btn" onclick="window.location.reload()">
      â†» Reload
    </button>
  </div>
  <div class="dropdown-group">
    <label for="chapterSelect">Chapter:</label>
    <select id="chapterSelect" onchange="updatePages()" disabled>
      <option value="">Select Chapter</option>
    </select>
  </div>
  <div class="dropdown-group">
    <label for="pageSelect">Page Number:</label>
    <select id="pageSelect" onchange="showQuestions()" disabled>
      <option value="">Select Page</option>
    </select>
  </div>
  <div id="scoreWrapper">
    <div id="scoreCard">
      Page score: 0 / 0
    </div>
    <button class="refreshBtn" id="refreshChapterBtn">
      <span>ðŸ”„</span> Refresh
    </button>
  </div>
</div>

<main class="content-area" id="contentArea">
  <div class="no-questions">Please select Class, Chapter, and Page Number to view questions.</div>
</main>
<script>
  const questionData = {
    "11": {
      "1": {
        title: "The Living World",
        questions: {
          "3": [[], ""],
          "4": [[], ""],
          "5": [[], ""],
          "6": [[], ""],
          "7": [[], ""],
          "8": [[], ""],
          "9": [[], ""]
        }
      },
      "2": {
        title: "Biological Classification",
        questions: {
          "10": [[], ""], "11": [[], ""], "12": [[], ""], "13": [[], ""], "14": [[], ""], "15": [[], ""],
          "16": [[], ""], "17": [[], ""], "18": [[], ""], "19": [[], ""], "20": [[], ""], "21": [[], ""], "22": [[], ""]
        }
      },
      "3": {
        title: "Plant Kingdom",
        questions: {
          "23": [[], ""], "24": [[], ""], "25": [[], ""], "26": [[], ""], "27": [[], ""], "28": [[], ""], "29": [[], ""],
          "30": [[], ""], "31": [[], ""], "32": [[], ""], "33": [[], ""], "34": [[], ""], "35": [[], ""], "36": [[], ""]
        }
      },
      "4": {
        title: "Animal Kingdom",
        questions: {
          "37": [[], ""], "38": [[], ""], "39": [[], ""], "40": [[], ""], "41": [[], ""], "42": [[], ""], "43": [[], ""],
          "44": [[], ""], "45": [[], ""], "46": [[], ""], "47": [[], ""], "48": [[], ""], "49": [[], ""], "50": [[], ""],
          "51": [[], ""], "52": [[], ""], "53": [[], ""], "54": [[], ""]
        }
      },
      "5": {
        title: "Morphology of Flowering Plants",
        questions: {
          "57": [[], ""], "58": [[], ""], "59": [[], ""], "60": [[], ""], "61": [[], ""], "62": [[], ""], "63": [[], ""],
          "64": [[], ""], "65": [[], ""], "66": [[], ""], "67": [[], ""], "68": [[], ""], "69": [[], ""], "70": [[], ""]
        }
      },
      "6": {
        title: "Anatomy of Flowering Plants",
        questions: {
          "71": [[], ""], "72": [[], ""], "73": [[], ""], "74": [[], ""], "75": [[], ""], "76": [[], ""], "77": [[], ""],
          "78": [[], ""], "79": [[], ""], "80": [[], ""], "81": [[], ""], "82": [[], ""], "83": [[], ""]
        }
      },
      "7": {
        title: "Structural Organisation in Animals",
        questions: {
          "79": [[], ""], "80": [[], ""], "81": [[], ""], "82": [[], ""], "83": [[], ""], "84": [[], ""]
        }
      },
      "8": {
        title: "Cell: The Unit of Life",
        questions: {
          "87": [[], ""], "88": [[], ""], "89": [[], ""], "90": [[], ""], "91": [[], ""], "92": [[], ""], "93": [[], ""],
          "94": [[], ""], "95": [[], ""], "96": [[], ""], "97": [[], ""], "98": [[], ""], "99": [[], ""], "100": [[], ""],
          "101": [[], ""], "102": [[], ""], "103": [[], ""]
        }
      },
      "9": {
        title: "Biomolecules",
        questions: {
          "104": [[], ""], "105": [[], ""], "106": [[], ""], "107": [[], ""], "108": [[], ""], "109": [[], ""], "110": [[], ""],
          "111": [[], ""], "112": [[], ""], "113": [[], ""], "114": [[], ""], "115": [[], ""], "116": [[], ""], "117": [[], ""],
          "118": [[], ""], "119": [[], ""]
        }
      },
      "10": {
        title: "Cell Cycle and Cell Division",
        questions: {
          "120": [[], ""], "121": [[], ""], "122": [[], ""], "123": [[], ""], "124": [[], ""], "125": [[], ""], "126": [[], ""],
          "127": [[], ""], "128": [[], ""], "129": [[], ""], "130": [[], ""]
        }
      },
      "11": {
        title: "Photosynthesis in Higher Plants",
        questions: {
          "133": [[], ""], "134": [[], ""], "135": [[], ""], "136": [[], ""], "137": [[], ""], "138": [[], ""], "139": [[], ""],
          "140": [[], ""], "141": [[], ""], "142": [[], ""], "143": [[], ""], "144": [[], ""], "145": [[], ""], "146": [[], ""],
          "147": [[], ""], "148": [[], ""], "149": [[], ""], "150": [[], ""], "151": [[], ""], "152": [[], ""]
        }
      },
      "12": {
        title: "Respiration in Plants",
        questions: {
          "153": [[], ""], "154": [[], ""], "155": [[], ""], "156": [[], ""], "157": [[], ""], "158": [[], ""], "159": [[], ""],
          "160": [[], ""], "161": [[], ""], "162": [[], ""], "163": [[], ""], "164": [[], ""], "165": [[], ""], "166": [[], ""]
        }
      },
      "13": {
        title: "Plant Growth and Development",
        questions: {
          "167": [[], ""], "168": [[], ""], "169": [[], ""], "170": [[], ""], "171": [[], ""], "172": [[], ""], "173": [[], ""],
          "174": [[], ""], "175": [[], ""], "176": [[], ""], "177": [[], ""], "178": [[], ""], "179": [[], ""], "180": [[], ""]
        }
      },
      "14": {
        title: "Breathing and Exchange of Gases",
        questions: {
          "183": [[], ""], "184": [[], ""], "185": [[], ""], "186": [[], ""], "187": [[], ""], "188": [[], ""], "189": [[], ""],
          "190": [[], ""], "191": [[], ""], "192": [[], ""]
        }
      },
      "15": {
        title: "Body Fluids and Circulation",
        questions: {
          "193": [[], ""], "194": [[], ""], "195": [[], ""], "196": [[], ""], "197": [[], ""], "198": [[], ""], "199": [[], ""],
          "200": [[], ""], "201": [[], ""], "202": [[], ""], "203": [[], ""], "204": [[], ""]
        }
      },
      "16": {
        title: "Excretory Products and their Elimination",
        questions: {
          "205": [[], ""], "206": [[], ""], "207": [[], ""], "208": [[], ""], "209": [[], ""], "210": [[], ""], "211": [[], ""],
          "212": [[], ""], "213": [[], ""], "214": [[], ""], "215": [[], ""], "216": [[], ""]
        }
      },
      "17": {
        title: "Locomotion and Movement",
        questions: {
          "217": [[], ""], "218": [[], ""], "219": [[], ""], "220": [[], ""], "221": [[], ""], "222": [[], ""], "223": [[], ""],
          "224": [[], ""], "225": [[], ""], "226": [[], ""], "227": [[], ""], "228": [[], ""], "229": [[], ""]
        }
      },
      "18": {
        title: "Neural Control and Coordination",
        questions: {
          "230": [[], ""], "231": [[], ""], "232": [[], ""], "233": [[], ""], "234": [[], ""], "235": [[], ""], "236": [[], ""],
          "237": [[], ""], "238": [[], ""]
        }
      },
      "19": {
        title: "Chemical Coordination and Integration",
        questions: {
          "239": [[], ""], "240": [[], ""], "241": [[], ""], "242": [[], ""], "243": [[], ""], "244": [[], ""], "245": [[], ""],
          "246": [[], ""], "247": [[], ""], "248": [[], ""], "249": [[], ""], "250": [[], ""]
        }
      }
    },
    "12": {
      "1": {
        title: "Sexual Reproduction in Flowering Plants",
        questions: {
          "3": [[], ""], "4": [[], ""], "5": [[], ""], "6": [[], ""], "7": [[], ""], "8": [[], ""], "9": [[], ""], "10": [[], ""],
          "11": [[], ""], "12": [[], ""], "13": [[], ""], "14": [[], ""], "15": [[], ""], "16": [[], ""], "17": [[], ""],
          "18": [[], ""], "19": [[], ""], "20": [[], ""], "21": [[], ""], "22": [[], ""], "23": [[], ""], "24": [[], ""], "25": [[], ""]
        }
      },
      "2": {
        title: "Human Reproduction",
        questions: {
          "26": [[], ""], "27": [[], ""], "28": [[], ""], "29": [[], ""], "30": [[], ""], "31": [[], ""], "32": [[], ""],
          "33": [[], ""], "34": [[], ""], "35": [[], ""], "36": [[], ""], "37": [[], ""], "38": [[], ""], "39": [[], ""], "40": [[], ""]
        }
      },
      "3": {
        title: "Reproductive Health",
        questions: {
          "41": [[], ""], "42": [[], ""], "43": [[], ""], "44": [[], ""], "45": [[], ""], "46": [[], ""], "47": [[], ""],
          "48": [[], ""], "49": [[], ""], "50": [[], ""]
        }
      },
      "4": {
        title: "Principles of Inheritance and Variation",
        questions: {
          "53": [[], ""], "54": [[], ""], "55": [[], ""], "56": [[], ""], "57": [[], ""], "58": [[], ""], "59": [[], ""],
          "60": [[], ""], "61": [[], ""], "62": [[], ""], "63": [[], ""], "64": [[], ""], "65": [[], ""], "66": [[], ""],
          "67": [[], ""], "68": [[], ""], "69": [[], ""], "70": [[], ""], "71": [[], ""], "72": [[], ""], "73": [[], ""],
          "74": [[], ""], "75": [[], ""], "76": [[], ""], "77": [[], ""], "78": [[], ""]
        }
      },
      "5": {
        title: "Molecular Basis of Inheritance",
        questions: {
          "79": [[], ""], "80": [[], ""], "81": [[], ""], "82": [[], ""], "83": [[], ""], "84": [[], ""], "85": [[], ""],
          "86": [[], ""], "87": [[], ""], "88": [[], ""], "89": [[], ""], "90": [[], ""], "91": [[], ""], "92": [[], ""],
          "93": [[], ""], "94": [[], ""], "95": [[], ""], "96": [[], ""], "97": [[], ""], "98": [[], ""], "99": [[], ""],
          "100": [[], ""], "101": [[], ""], "102": [[], ""], "103": [[], ""], "104": [[], ""], "105": [[], ""], "106": [[], ""],
          "107": [[], ""], "108": [[], ""], "109": [[], ""]
        }
      },
      "6": {
        title: "Evolution",
        questions: {
          "110": [[], ""], "111": [[], ""], "112": [[], ""], "113": [[], ""], "114": [[], ""], "115": [[], ""], "116": [[], ""],
          "117": [[], ""], "118": [[], ""], "119": [[], ""], "120": [[], ""], "121": [[], ""], "122": [[], ""], "123": [[], ""],
          "124": [[], ""], "125": [[], ""], "126": [[], ""]
        }
      },
      "7": {
        title: "Human Health and Disease",
        questions: {
          "129": [[], ""], "130": [[], ""], "131": [[], ""], "132": [[], ""], "133": [[], ""], "134": [[], ""], "135": [[], ""],
          "136": [[], ""], "137": [[], ""], "138": [[], ""], "139": [[], ""], "140": [[], ""], "141": [[], ""], "142": [[], ""],
          "143": [[], ""], "144": [[], ""], "145": [[], ""], "146": [[], ""], "147": [[], ""], "148": [[], ""]
        }
      },
      "8": {
        title: "Microbes in Human Welfare",
        questions: {
          "149": [[], ""], "150": [[], ""], "151": [[], ""], "152": [[], ""], "153": [[], ""], "154": [[], ""], "155": [[], ""],
          "156": [[], ""], "157": [[], ""], "158": [[], ""], "159": [[], ""], "160": [[], ""]
        }
      },
      "9": {
        title: "Biotechnology: Principles and Processes",
        questions: {
          "163": [[], ""], "164": [[], ""], "165": [[], ""], "166": [[], ""], "167": [[], ""], "168": [[], ""], "169": [[], ""],
          "170": [[], ""], "171": [[], ""], "172": [[], ""], "173": [[], ""], "174": [[], ""], "175": [[], ""], "176": [[], ""]
        }
      },
      "10": {
        title: "Biotechnology and its Applications",
        questions: {
          "177": [[], ""], "178": [[], ""], "179": [[], ""], "180": [[], ""], "181": [[], ""], "182": [[], ""], "183": [[], ""],
          "184": [[], ""], "185": [[], ""], "186": [[], ""], "187": [[], ""]
        }
      },
      "11": {
        title: "Organisms and Populations",
        questions: {
          "190": [[], ""], "191": [[], ""], "192": [[], ""], "193": [[], ""], "194": [[], ""], "195": [[], ""], "196": [[], ""],
          "197": [[], ""], "198": [[], ""], "199": [[], ""], "200": [[], ""], "201": [[], ""], "202": [[], ""], "203": [[], ""], "204": [[], ""]
        }
      },
      "12": {
        title: "Ecosystem",
        questions: {
          "205": [[], ""], "206": [[], ""], "207": [[], ""], "208": [[], ""], "209": [[], ""], "210": [[], ""], "211": [[], ""],
          "212": [[], ""], "213": [[], ""], "214": [[], ""], "215": [[], ""]
        }
      },
      "13": {
        title: "Biodiversity and Conservation",
        questions: {
          "216": [[{
  question: "How many ant species exist worldwide?",
  options: [
    "c) 30,000",
    "b) 20,000",
    "a) 10,000",
    "d) 40,000"
  ],
  answer: "b) 20,000"
},
{
  question: "Biodiversity exists at various levels of biological organization from:",
  options: [
    "c) Atoms to molecules",
    "a) Cells to tissues",
    "b) Macromolecules within cells to biomes",
    "d) Organs to organisms"
  ],
  answer: "b) Macromolecules within cells to biomes"
},
{
  question: "The term 'biodiversity' was made popular by which scientist?",
  options: [
    "c) Paul Ehrlich",
    "a) Charles Darwin",
    "d) R.H. Whittaker",
    "b) Edward Wilson"
  ],
  answer: "b) Edward Wilson"
},
{
  question: "Approximately how many beetle species have been identified?",
  options: [
    "b) 2,00,000",
    "c) 3,00,000",
    "d) 4,00,000",
    "a) 1,00,000"
  ],
  answer: "c) 3,00,000"
},
{
  question: "What was Edward Wilson's field of expertise?",
  options: [
    "d) Geneticist",
    "c) Sociobiologist",
    "a) Ecologist",
    "b) Taxonomist"
  ],
  answer: "c) Sociobiologist"
},
{
  question: "How many orchid species have been documented?",
  options: [
    "a) 10,000",
    "c) 20,000",
    "d) 25,000",
    "b) 15,000"
  ],
  answer: "c) 20,000"
}], "This page introduces biodiversity, discussing species diversity across different groups (ants, beetles, orchids) and introduces Edward Wilson's role in popularizing the term 'biodiversity'. It emphasizes that biodiversity exists at all levels of biological organization."],
"217": [[{
  question: "How many genetically distinct rice strains are found in India?",
  options: [
    "d) 70,000",
    "a) 10,000",
    "c) 50,000",
    "b) 30,000"
  ],
  answer: "c) 50,000"
},
{
  question: "What does the presence of deserts, rainforests, mangroves, coral reefs, wetlands, estuaries, and alpine meadows indicate about India compared to Norway?",
  options: [
    "b) Deserts, rain forests, mangroves, coral reefs, wetlands, estuaries, alpine meadows",
    "d) Only wetlands",
    "a) Only deserts",
    "c) Only rain forests"
  ],
  answer: "b) Deserts, rain forests, mangroves, coral reefs, wetlands, estuaries, alpine meadows"
},
{
  question: "According to Robert May, global species diversity is estimated at:",
  options: [
    "c) 20 million",
    "b) 7 million",
    "d) 50 million",
    "a) 1.5 million"
  ],
  answer: "b) 7 million"
},
{
  question: "The variation in amphibian species between Western Ghats and Eastern Ghats is an example of:",
  options: [
    "d) Functional diversity",
    "c) Ecological diversity",
    "b) Species diversity",
    "a) Genetic diversity"
  ],
  answer: "b) Species diversity"
},
{
  question: "According to IUCN data from 2004, how many species had been documented?",
  options: [
    "a) 1.5 million",
    "c) 7 million",
    "b) 3 million",
    "d) 20 million"
  ],
  answer: "a) 1.5 million"
},
{
  question: "How many mango varieties exist in India?",
  options: [
    "c) 1,500",
    "a) 500",
    "b) 1,000",
    "d) 2,000"
  ],
  answer: "b) 1,000"
},
{
  question: "The diversity represented by 50,000 rice strains and 1,000 mango varieties in India is:",
  options: [
    "d) Community diversity",
    "c) Genetic diversity",
    "b) Ecological diversity",
    "a) Species diversity"
  ],
  answer: "c) Genetic diversity"
}], ""],
"218": [[{
  question: "What proportion of all documented species are animals?",
  options: [
    "b) 60",
    "c) 70",
    "a) 50",
    "d) 80"
  ],
  answer: "c) 70"
},
{
  question: "Which vertebrate group shows maximum species diversity?",
  options: [
    "b) Birds",
    "c) Fishes",
    "a) Mammals",
    "d) Reptiles"
  ],
  answer: "c) Fishes"
},
{
  question: "Among animals, insects make up more than what percentage?",
  options: [
    "c) 70",
    "d) 80",
    "a) 50",
    "b) 60"
  ],
  answer: "c) 70"
},
{
  question: "If molecular and biochemical methods are used to classify prokaryotes, their diversity could reach:",
  options: [
    "a) Thousands",
    "c) Millions",
    "d) Billions",
    "b) Hundreds of thousands"
  ],
  answer: "c) Millions"
},
{
  question: "Plants including algae, fungi, bryophytes, gymnosperms and angiosperms make up approximately what percent of species?",
  options: [
    "c) 32",
    "d) 42",
    "a) 12",
    "b) 22"
  ],
  answer: "b) 22"
},
{
  question: "Out of 10 animals on Earth, how many are insects?",
  options: [
    "d) 8",
    "c) 7",
    "b) 6",
    "a) 5"
  ],
  answer: "c) 7"
},
{
  question: "Traditional taxonomic approaches are inadequate for identifying:",
  options: [
    "a) Plant species",
    "c) Microbial species",
    "b) Animal species",
    "d) Fungal species"
  ],
  answer: "c) Microbial species"
},
{
  question: "Fungi species worldwide outnumber the combined total of:",
  options: [
    "d) All microbes",
    "b) Fishes, amphibians, reptiles and mammals",
    "c) All plants",
    "a) All invertebrates"
  ],
  answer: "b) Fishes, amphibians, reptiles and mammals"
}], ""],
"219": [[{
  question: "Though India covers only 2.4% of Earth's land, what is its share of global species diversity?",
  options: [
    "b) 4.8%",
    "d) 12.5%",
    "c) 8.1%",
    "a) 2.4%"
  ],
  answer: "c) 8.1%"
},
{
  question: "The latitudinal gradient in diversity indicates that:",
  options: [
    "c) Species diversity remains constant throughout latitudes",
    "b) Species diversity increases as we move away from the equator towards the poles",
    "a) Species diversity decreases as we move away from the equator towards the poles",
    "d) There is no relationship between latitude and species diversity"
  ],
  answer: "a) Species diversity decreases as we move away from the equator towards the poles"
},
{
  question: "How many plant species have been recorded in India?",
  options: [
    "d) 55,000",
    "a) 25,000",
    "c) 45,000",
    "b) 35,000"
  ],
  answer: "c) 45,000"
},
{
  question: "How many bird species does Colombia, near the equator, have?",
  options: [
    "d) 1,200",
    "b) 1,400",
    "a) 105",
    "c) 56"
  ],
  answer: "b) 1,400"
},
{
  question: "At 41Â°N latitude, how many bird species are found in New York?",
  options: [
    "c) 150",
    "b) 105",
    "a) 56",
    "d) 200"
  ],
  answer: "b) 105"
},
{
  question: "How many bird species does India have?",
  options: [
    "a) 500",
    "c) 1,200",
    "b) 800",
    "d) 1,500"
  ],
  answer: "c) 1,200"
},
{
  question: "At 71Â°N latitude, how many bird species does Greenland have?",
  options: [
    "c) 150",
    "a) 56",
    "b) 105",
    "d) 200"
  ],
  answer: "a) 56"
},
{
  question: "The tropical belt (23.5Â°N to 23.5Â°S) in terms of species:",
  options: [
    "d) Have no significant species diversity",
    "a) Harbor less species than temperate or polar areas",
    "c) Harbor more species than temperate or polar areas",
    "b) Harbor same species as temperate areas"
  ],
  answer: "c) Harbor more species than temperate or polar areas"
},
{
  question: "A tropical forest like Ecuador has how many times more vascular plant species than a temperate forest of similar size?",
  options: [
    "b) 10",
    "c) 15",
    "d) 20",
    "a) 5"
  ],
  answer: "b) 10"
}], ""],
"220": [[{
  question: "Who first observed the species-area relationship?",
  options: [
    "d) Edward Wilson",
    "b) Alexander von Humboldt",
    "a) Charles Darwin",
    "c) Robert May"
  ],
  answer: "b) Alexander von Humboldt"
},
{
  question: "The species-area relationship on a logarithmic scale is expressed as:",
  options: [
    "c) S = C + ZA",
    "a) S = CA^Z",
    "b) Log S = Log C + Z Log A",
    "d) Log S = C + Z Log A"
  ],
  answer: "b) Log S = Log C + Z Log A"
},
{
  question: "For very large areas like continents, the Z value ranges between:",
  options: [
    "b) 0.6 to 1.2",
    "c) 1.5 to 2.0",
    "a) 0.1 to 0.2",
    "d) 2.0 to 3.0"
  ],
  answer: "b) 0.6 to 1.2"
},
{
  question: "What does Z represent in the species-area equation?",
  options: [
    "b) Area",
    "d) Y-intercept",
    "c) Slope of the line (regression coefficient)",
    "a) Species richness"
  ],
  answer: "c) Slope of the line (regression coefficient)"
},
{
  question: "For mammals across tropical forests in different continents, the Z value is:",
  options: [
    "c) 1.15",
    "a) 0.2",
    "d) 1.5",
    "b) 0.6"
  ],
  answer: "c) 1.15"
},
{
  question: "Ecologists found that Z value typically falls in the range of:",
  options: [
    "a) 0.01 to 0.1",
    "c) 0.5 to 1.0",
    "b) 0.1 to 0.2",
    "d) 1.0 to 2.0"
  ],
  answer: "b) 0.1 to 0.2"
},
{
  question: "According to von Humboldt, within a region, species richness:",
  options: [
    "c) Remains constant with area",
    "d) Increases indefinitely with area",
    "b) Increases with increasing explored area, but only up to a limit",
    "a) Decreases with increasing explored area"
  ],
  answer: "b) Increases with increasing explored area, but only up to a limit"
}], ""],
"221": [[{
  question: "David Tilman's outdoor plot experiments demonstrated that:",
  options: [
    "a) Plots with more species showed more year-to-year variation in total biomass",
    "b) Plots with more species showed less year-to-year variation in total biomass",
    "d) Diversity has no effect on ecosystem stability",
    "c) Increased diversity led to lower productivity"
  ],
  answer: "b) Plots with more species showed less year-to-year variation in total biomass"
},
{
  question: "In Paul Ehrlich's 'Rivet Popper Hypothesis', what comparison was made?",
  options: [
    "b) Ecosystem to an airplane and species to rivets",
    "d) Ecosystem to a car and species to wheels",
    "c) Ecosystem to a building and species to bricks",
    "a) Ecosystem to a ship and species to anchors"
  ],
  answer: "b) Ecosystem to an airplane and species to rivets"
},
{
  question: "Tilman's experiments also revealed that:",
  options: [
    "b) Increased diversity contributed to higher productivity",
    "a) Decreased diversity contributed to higher productivity",
    "d) Only genetic diversity affects productivity",
    "c) Diversity has no relation with productivity"
  ],
  answer: "b) Increased diversity contributed to higher productivity"
},
{
  question: "What does a stable community demonstrate?",
  options: [
    "d) Have very low species richness",
    "b) Not be resistant to disturbances",
    "c) Not show too much variation in productivity and be resistant to disturbances",
    "a) Show high variation in productivity year to year"
  ],
  answer: "c) Not show too much variation in productivity and be resistant to disturbances"
},
{
  question: "The Rivet Popper Hypothesis suggests that species loss:",
  options: [
    "c) Never affects ecosystem functioning",
    "a) Has immediate drastic effects on ecosystem",
    "b) May initially have no effect but becomes critical as more species are lost",
    "d) Only affects genetic diversity"
  ],
  answer: "b) May initially have no effect but becomes critical as more species are lost"
},
{
  question: "How many species extinctions in the last 500 years are documented by IUCN Red List (2004)?",
  options: [
    "d) 1000",
    "a) 500",
    "c) 784",
    "b) 650"
  ],
  answer: "c) 784"
},
{
  question: "Of the 784 extinct species, how many were invertebrates?",
  options: [
    "c) 359",
    "b) 338",
    "a) 87",
    "d) 400"
  ],
  answer: "c) 359"
},
{
  question: "Of the 784 extinct species, how many were vertebrates?",
  options: [
    "a) 87",
    "d) 400",
    "b) 338",
    "c) 359"
  ],
  answer: "b) 338"
},
{
  question: "Of the 784 extinct species, how many were plants?",
  options: [
    "b) 100",
    "a) 87",
    "c) 150",
    "d) 200"
  ],
  answer: "a) 87"
}], ""],
"222": [[{
  question: "How many species globally are currently threatened with extinction?",
  options: [
    "c) 15,500",
    "a) 10,000",
    "d) 20,000",
    "b) 12,500"
  ],
  answer: "c) 15,500"
},
{
  question: "What percentage of bird species currently face extinction threat?",
  options: [
    "a) 12",
    "c) 32",
    "d) 31",
    "b) 23"
  ],
  answer: "a) 12"
},
{
  question: "The primary driver of species extinction is:",
  options: [
    "d) Co-extinction",
    "c) Alien species invasion",
    "b) Habitat loss and fragmentation",
    "a) Over-exploitation"
  ],
  answer: "b) Habitat loss and fragmentation"
},
{
  question: "What percentage of mammal species face extinction currently?",
  options: [
    "b) 23",
    "a) 12",
    "d) 31",
    "c) 32"
  ],
  answer: "b) 23"
},
{
  question: "Which animal group is most vulnerable to extinction?",
  options: [
    "d) Reptiles",
    "c) Amphibians",
    "a) Birds",
    "b) Mammals"
  ],
  answer: "c) Amphibians"
},
{
  question: "Current extinction rates (Sixth Extinction) are how many times faster than pre-human times?",
  options: [
    "a) 10 to 50",
    "c) 100 to 1,000",
    "b) 50 to 100",
    "d) 1,000 to 10,000"
  ],
  answer: "c) 100 to 1,000"
},
{
  question: "What percentage of amphibian species currently face extinction?",
  options: [
    "d) 31",
    "a) 12",
    "c) 32",
    "b) 23"
  ],
  answer: "c) 32"
},
{
  question: "Tropical rainforests now cover what percentage of Earth's land?",
  options: [
    "a) 2",
    "c) 6",
    "d) 8",
    "b) 4"
  ],
  answer: "c) 6"
},
{
  question: "Tropical rainforests once covered more than what percent of Earth's land?",
  options: [
    "c) 14",
    "a) 6",
    "b) 10",
    "d) 20"
  ],
  answer: "c) 14"
},
{
  question: "The four major biodiversity loss causes are called:",
  options: [
    "d) The Major Threats",
    "a) The Evil Quartet",
    "c) The Fatal Four",
    "b) The Big Four"
  ],
  answer: "a) The Evil Quartet"
}], ""],
"223": [[{
  question: "Which species went extinct due to human over-exploitation?",
  options: [
    "d) None of the above",
    "b) Steller's sea cow and passenger pigeon",
    "a) Dodo and African catfish",
    "c) Nile perch and cichlid fish"
  ],
  answer: "b) Steller's sea cow and passenger pigeon"
},
{
  question: "Co-extinction means:",
  options: [
    "d) Extinction due to pollution",
    "a) Extinction of two unrelated species at the same time",
    "b) Extinction of species associated with extinct host in an obligatory way",
    "c) Extinction due to climate change"
  ],
  answer: "b) Extinction of species associated with extinct host in an obligatory way"
},
{
  question: "Introduction of Nile perch to Lake Victoria is an example of:",
  options: [
    "a) Over-exploitation",
    "c) Alien species invasion",
    "d) Co-extinction",
    "b) Habitat loss and fragmentation"
  ],
  answer: "c) Alien species invasion"
},
{
  question: "How many cichlid fish species went extinct due to Nile perch in Lake Victoria?",
  options: [
    "d) More than 300 species of cichlid fish",
    "c) More than 200 species of cichlid fish",
    "b) More than 150 species of cichlid fish",
    "a) More than 100 species of cichlid fish"
  ],
  answer: "c) More than 200 species of cichlid fish"
},
{
  question: "What percentage of drugs in the global market come from plants?",
  options: [
    "d) 45",
    "b) 25",
    "a) 15",
    "c) 35"
  ],
  answer: "b) 25"
},
{
  question: "When a host fish goes extinct, what also becomes extinct?",
  options: [
    "d) All competing species",
    "a) Its predators",
    "c) Its unique assemblage of parasites",
    "b) Its prey"
  ],
  answer: "c) Its unique assemblage of parasites"
},
{
  question: "Which fish poses a threat to native Indian river catfish?",
  options: [
    "d) Steller's sea cow",
    "a) Nile perch",
    "b) African catfish (Clarias gariepinus)",
    "c) Cichlid fish"
  ],
  answer: "b) African catfish (Clarias gariepinus)"
},
{
  question: "Biodiversity conservation arguments include all EXCEPT:",
  options: [
    "a) Narrowly utilitarian",
    "c) Ethical",
    "d) Political",
    "b) Broadly utilitarian"
  ],
  answer: "d) Political"
}], ""],
"224": [[{
  question: "Through photosynthesis, the Amazon forest produces what percentage of Earth's atmospheric oxygen?",
  options: [
    "d) 40%",
    "a) 10%",
    "b) 20%",
    "c) 30%"
  ],
  answer: "b) 20%"
},
{
  question: "The fourth Indian biodiversity hotspot is:",
  options: [
    "d) Arabian Sea",
    "a) Eastern Ghats",
    "b) Sundaland",
    "c) Deccan Peninsula"
  ],
  answer: "b) Sundaland"
},
{
  question: "How many biodiversity hotspots does India have?",
  options: [
    "c) 4",
    "d) 5",
    "a) 2",
    "b) 3"
  ],
  answer: "c) 4"
},
{
  question: "India's biodiversity hotspots include:",
  options: [
    "d) Indo-Burma, Eastern Himalayas, Arabian Sea",
    "b) Western Ghats & Sri Lanka, Indo-Burma, Himalayas",
    "a) Western Ghats, Eastern Ghats, Himalayas",
    "c) Eastern Ghats, Sundaland, Western Ghats"
  ],
  answer: "b) Western Ghats & Sri Lanka, Indo-Burma, Himalayas"
},
{
  question: "How many national parks does India have?",
  options: [
    "b) 70",
    "c) 90",
    "a) 50",
    "d) 110"
  ],
  answer: "c) 90"
},
{
  question: "In-situ conservation means:",
  options: [
    "d) Conservation in seed banks",
    "a) Conservation in botanical gardens",
    "c) Conservation in natural habitats like national parks",
    "b) Conservation in zoos"
  ],
  answer: "c) Conservation in natural habitats like national parks"
},
{
  question: "How many biosphere reserves does India have approximately?",
  options: [
    "c) 14",
    "a) 8",
    "b) 10",
    "d) 18"
  ],
  answer: "c) 14"
},
{
  question: "How many wildlife sanctuaries exist in India?",
  options: [
    "b) 350",
    "d) 448",
    "c) 400",
    "a) 300"
  ],
  answer: "d) 448"
},
{
  question: "Which is NOT an example of in-situ conservation?",
  options: [
    "d) Botanical gardens",
    "c) Biosphere reserves",
    "a) National parks",
    "b) Wildlife sanctuaries"
  ],
  answer: "d) Botanical gardens"
}], ""],
"225": [[{
  question: "Sacred groves in Khasi and Jaintia Hills are found in which state?",
  options: [
    "d) Manipur",
    "c) Nagaland",
    "b) Meghalaya",
    "a) Arunachal Pradesh"
  ],
  answer: "b) Meghalaya"
},
{
  question: "Ex-situ conservation includes all EXCEPT:",
  options: [
    "a) Zoological parks",
    "d) Sacred groves",
    "c) Seed banks",
    "b) Botanical gardens"
  ],
  answer: "d) Sacred groves"
},
{
  question: "How many sacred forests are there in Meghalaya?",
  options: [
    "a) 40",
    "c) 79",
    "d) 100",
    "b) 55"
  ],
  answer: "c) 79"
},
{
  question: "An example of ex-situ conservation is:",
  options: [
    "d) Sacred Grove",
    "a) National Park",
    "c) Botanical Garden",
    "b) Wildlife Sanctuary"
  ],
  answer: "c) Botanical Garden"
},
{
  question: "In ex-situ conservation, gametes can be preserved through:",
  options: [
    "c) Micropropagation",
    "d) DNA barcoding",
    "b) Cryopreservation techniques",
    "a) Tissue culture"
  ],
  answer: "b) Cryopreservation techniques"
},
{
  question: "When was the Convention on Biological Diversity held?",
  options: [
    "d) 1996",
    "b) 1992",
    "a) 1990",
    "c) 1994"
  ],
  answer: "b) 1992"
},
{
  question: "The Convention on Biological Diversity (Earth Summit) took place in:",
  options: [
    "a) Paris",
    "c) Rio de Janeiro",
    "d) Stockholm",
    "b) New York"
  ],
  answer: "c) Rio de Janeiro"
},
{
  question: "Which community in Rajasthan is famous for black buck conservation?",
  options: [
    "d) Bhil",
    "a) Gujjar",
    "b) Bishnoi",
    "c) Meena"
  ],
  answer: "b) Bishnoi"
}], "This page introduces the detritus food chain (DFC), which begins with dead organic matter consumed by decomposers like bacteria and fungi, followed by detritivores such as earthworms, woodlice, and crabs.<br><br>It also explains trophic levels as feeding positions in a food chain - producers at the first level, herbivores at the second, and carnivores at subsequent levels. A diagram illustrates the hierarchical energy flow from producers through various consumer levels to decomposers in an ecosystem."],
"226": [[], ""],
"227": [[], ""]
        }
      }
    }
  };

  let currentQuestions = [];
  let questionStates = {};

  function loadPersistentData() {
    try {
      const saved = localStorage.getItem('neet-pyq-states');
      if (saved) {
        questionStates = JSON.parse(saved);
      }
    } catch (e) {
      console.error('Error loading data:', e);
    }
  }

  function savePersistentData() {
    try {
      localStorage.setItem('neet-pyq-states', JSON.stringify(questionStates));
    } catch (e) {
      console.error('Error saving data:', e);
    }
  }

  loadPersistentData();

  function updateChapters() {
    const classSelect = document.getElementById('classSelect');
    const chapterSelect = document.getElementById('chapterSelect');
    const pageSelect = document.getElementById('pageSelect');
    
    const classValue = classSelect.value;
    
    chapterSelect.innerHTML = '<option value="">Select Chapter</option>';
    pageSelect.innerHTML = '<option value="">Select Page</option>';
    chapterSelect.disabled = true;
    pageSelect.disabled = true;
    
    document.getElementById('contentArea').innerHTML = '<div class="no-questions">Please select Class, Chapter, and Page Number to view questions.</div>';
    
    if (classValue && questionData[classValue]) {
      const chapters = questionData[classValue];
      Object.keys(chapters).forEach(chapterNum => {
        const option = document.createElement('option');
        option.value = chapterNum;
        option.textContent = `Chapter ${chapterNum}: ${chapters[chapterNum].title}`;
        chapterSelect.appendChild(option);
      });
      chapterSelect.disabled = false;
    }
    
    updateScoreDisplay();
  }

  function updatePages() {
    const classSelect = document.getElementById('classSelect');
    const chapterSelect = document.getElementById('chapterSelect');
    const pageSelect = document.getElementById('pageSelect');
    
    const classValue = classSelect.value;
    const chapterValue = chapterSelect.value;
    
    pageSelect.innerHTML = '<option value="">Select Page</option>';
    pageSelect.disabled = true;
    
    document.getElementById('contentArea').innerHTML = '<div class="no-questions">Please select a Page Number to view questions.</div>';
    
    if (classValue && chapterValue) {
      const chapter = questionData[classValue][chapterValue];
      if (chapter && chapter.questions) {
        const pages = Object.keys(chapter.questions).sort((a, b) => parseInt(a) - parseInt(b));
        
        if (pages.length > 0) {
          pages.forEach(pageNum => {
            const pageData = chapter.questions[pageNum];
            let questionCount = 0;
            
            // Extract actual question count (not counting summary)
            if (Array.isArray(pageData) && pageData.length === 2 && Array.isArray(pageData[0])) {
              questionCount = pageData[0].length;
            } else if (Array.isArray(pageData)) {
              questionCount = pageData.length;
            }
            
            const option = document.createElement('option');
            option.value = pageNum;
            option.textContent = `Page ${pageNum} (${questionCount} question${questionCount !== 1 ? 's' : ''})`;
            pageSelect.appendChild(option);
          });
          pageSelect.disabled = false;
        }
      }
    }
    
    updateScoreDisplay();
  }

  function showQuestions() {
    const classSelect = document.getElementById('classSelect');
    const chapterSelect = document.getElementById('chapterSelect');
    const pageSelect = document.getElementById('pageSelect');
    const contentArea = document.getElementById('contentArea');
    
    const classValue = classSelect.value;
    const chapterValue = chapterSelect.value;
    const pageValue = pageSelect.value;
    
    if (!classValue || !chapterValue || !pageValue) {
      return;
    }
    
    currentQuestions = questionData[classValue][chapterValue].questions[pageValue] || [];

    // Extract summary from nested structure
    let questionsArr = currentQuestions;
    let summaryStr = "";
    if(Array.isArray(currentQuestions) && currentQuestions.length === 2 && Array.isArray(currentQuestions[0])) {
      questionsArr = currentQuestions[0];
      summaryStr = currentQuestions[1] || "";
      currentQuestions = questionsArr; // Update for compatibility
    }

    
    if (currentQuestions.length === 0) {
      contentArea.innerHTML = '<div class="no-questions">No questions available for this page yet. Add questions to see them here.</div>';
      updateScoreDisplay();
      return;
    }
    
    let html = '';

    // Add summary if exists
    if (summaryStr && summaryStr.trim().length > 0) {
      html += `
        <button id="summaryBtn" class="summary-toggle-btn" onclick="toggleSummary()">ðŸ“š View Summary</button>
        <div id="summaryContent" class="summary-content">${summaryStr}</div>
      `;
    }

    html += `<div class="question-count">Total Questions: ${currentQuestions.length}</div>`;
    
    currentQuestions.forEach((q, index) => {
      const questionId = `${classValue}-${chapterValue}-${pageValue}-${index}`;
      const questionState = questionStates[questionId];
      
      html += `
        <div class="question-item">
          <div class="question-header">
            <span class="question-number">Question ${index + 1}</span>
            <span class="question-year" style="cursor: pointer;" onclick="copyQuestion(${index}, '${pageValue}')">ðŸ“‹ Copy</span>
          </div>
          <div class="question-text">${q.question}</div>
          <div class="options">
            ${q.options.map((opt, optIndex) => {
              let optionClass = 'option';
              if (questionState) {
                optionClass += ' disabled';
                if (questionState.selectedIndex === optIndex) {
                  optionClass += questionState.isCorrect ? ' answered-correct' : ' answered-incorrect';
                }
              }
              return `<div class="${optionClass}" onclick="selectOption(${index}, ${optIndex}, '${q.answer.replace(/'/g, "\\'")}', '${questionId}')">${opt}</div>`;
            }).join('')}
          </div>
          <div class="button-group">
            <button class="btn btn-answer" onclick="showAnswer(${index})">Show Answer</button>
          </div>
          <div class="answer-reveal" id="answer-${index}">
            <strong>Correct Answer:</strong> ${q.answer}
          </div>
        </div>
      `;
    });
    
    contentArea.innerHTML = html;
    
    setTimeout(addChatGPTButtons, 100);
    
    updateScoreDisplay();
  }
 
  function selectOption(questionIndex, optionIndex, correctAnswer, questionId) {
    if (questionStates[questionId]) {
      return;
    }

    const selectedOption = currentQuestions[questionIndex].options[optionIndex];
    const isCorrect = selectedOption === correctAnswer;
    
    questionStates[questionId] = {
      selectedIndex: optionIndex,
      isCorrect: isCorrect
    };

    savePersistentData();

    const options = document.querySelectorAll(`.question-item:nth-child(${questionIndex + 2}) .option`);
    options.forEach((option, index) => {
      if (index === optionIndex) {
        option.classList.add(isCorrect ? 'answered-correct' : 'answered-incorrect');
      } else {
        option.classList.add('disabled');
      }
    });

    const clickedOption = options[optionIndex];
    const popup = document.createElement('div');
    popup.className = `answer-popup ${isCorrect ? 'correct' : 'incorrect'}`;
    popup.textContent = isCorrect ? 'âœ“' : 'âœ—';
    clickedOption.appendChild(popup);
    
    setTimeout(() => {
      if (clickedOption.contains(popup)) {
        clickedOption.removeChild(popup);
      }
    }, 1200);

    const tickCrossPopup = document.createElement('div');
    tickCrossPopup.className = `tick-cross-popup ${isCorrect ? 'correct' : 'incorrect'}`;
    tickCrossPopup.textContent = isCorrect ? 'âœ“' : 'âœ—';
    document.body.appendChild(tickCrossPopup);
    setTimeout(() => document.body.removeChild(tickCrossPopup), 1500);

    updateScoreDisplay();
  }

  function showAnswer(index) {
    const answerDiv = document.getElementById(`answer-${index}`);
    answerDiv.style.display = answerDiv.style.display === 'block' ? 'none' : 'block';
  }

  function copyQuestion(index, pageNum) {
    const q = currentQuestions[index];
    const text = `${q.year}\nPage ${pageNum}\n\n${q.question}\n\n${q.options.join('\n')}\n\nAnswer: ${q.answer}`;
    
    navigator.clipboard.writeText(text).then(() => {
      alert('Question copied to clipboard!');
    }).catch(() => {
      alert('Failed to copy question');
    });
  }

  function updateScoreDisplay() {
    const classSelect = document.getElementById('classSelect');
    const chapterSelect = document.getElementById('chapterSelect');
    const pageSelect = document.getElementById('pageSelect');
    const scoreCard = document.getElementById('scoreCard');
    
    const classValue = classSelect.value;
    const chapterValue = chapterSelect.value;
    const pageValue = pageSelect.value;
    
    if (!classValue || !chapterValue || !pageValue || currentQuestions.length === 0) {
      scoreCard.textContent = 'Page score: 0 / 0';
      return;
    }
    
    let correct = 0;
    
    currentQuestions.forEach((q, index) => {
      const questionId = `${classValue}-${chapterValue}-${pageValue}-${index}`;
      const questionState = questionStates[questionId];
      if (questionState && questionState.isCorrect) {
        correct++;
      }
    });
    
    const totalQuestions = currentQuestions.length;
    scoreCard.textContent = `Page score: ${correct} / ${totalQuestions}`;
  }

  function buildChatGPTPrompt(questionIndex) {
    if (!currentQuestions[questionIndex]) return null;
    
    const q = currentQuestions[questionIndex];
    
    return `Question:
${q.question}

Options:
${q.options.join('\n')}

Answer this question in 3 versions:

Version 1: Brief explanation

Version 2: Quote exact reference from NCERT textbook and explain accordingly

Version 3: Detailed explanation with option analysis`;
  }

  async function copyToClipboard(text) {
    try {
      await navigator.clipboard.writeText(text);
      return true;
    } catch (err) {
      return false;
    }
  }

  async function openChatGPTWithAutopaste(prompt) {
    await copyToClipboard(prompt);
    
    try {
      const encodedPrompt = encodeURIComponent(prompt);
      const chatGPTUrl = `https://chat.openai.com/?q=${encodedPrompt}`;
      
      const newWindow = window.open(chatGPTUrl, '_blank');
      
      if (newWindow) {
        setTimeout(() => {
          try {
            newWindow.focus();
          } catch (e) {
            // Ignore
          }
        }, 1000);
      }
      
      return true;
    } catch (e) {
      window.open('https://chat.openai.com/', '_blank');
      return true;
    }
  }

  function showCopyNotification() {
    const notification = document.createElement('div');
    notification.className = 'copy-notification';
    notification.textContent = 'âœ“ Copied! Opening ChatGPT...';
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.remove();
    }, 3000);
  }

  function addChatGPTButtons() {
    const questionItems = document.querySelectorAll('.question-item');
    
    questionItems.forEach((questionElement, index) => {
      const buttonGroup = questionElement.querySelector('.button-group');
      if (!buttonGroup) return;
      if (buttonGroup.querySelector('.chatgpt-btn')) return;

      const btn = document.createElement('button');
      btn.className = 'chatgpt-btn';
      btn.textContent = 'ChatGPT';

      btn.addEventListener('click', async () => {
        const prompt = buildChatGPTPrompt(index);
        if (!prompt) {
          alert('Could not extract question content.');
          return;
        }
        
        const originalText = btn.textContent;
        btn.textContent = 'Opening...';
        btn.style.background = '#f39c12';
        
        const success = await openChatGPTWithAutopaste(prompt);
        
        if (success) {
          showCopyNotification();
          
          btn.textContent = 'Opened!';
          btn.style.background = '#27ae60';
          
          setTimeout(() => {
            btn.textContent = originalText;
            btn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
          }, 2000);
        } else {
          btn.textContent = 'Error';
          btn.style.background = '#e74c3c';
          
          setTimeout(() => {
            btn.textContent = originalText;
            btn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
          }, 2000);
        }
      });

      buttonGroup.appendChild(btn);
    });
  }

  document.getElementById('refreshChapterBtn').addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    
    const classSelect = document.getElementById('classSelect');
    const chapterSelect = document.getElementById('chapterSelect');
    const pageSelect = document.getElementById('pageSelect');
    
    const classValue = classSelect.value;
    const chapterValue = chapterSelect.value;
    const pageValue = pageSelect.value;
    
    if (!classValue || !chapterValue || !pageValue) {
      alert('Please select a page first');
      return;
    }
    
    if (!confirm('Are you sure you want to reset the score for this page?')) {
      return;
    }
    
    currentQuestions.forEach((q, index) => {
      const questionId = `${classValue}-${chapterValue}-${pageValue}-${index}`;
      delete questionStates[questionId];
    });
    
    savePersistentData();
    
    showQuestions();
  });

  function toggleSummary() {
    const summaryDiv = document.getElementById('summaryContent');
    const btn = document.getElementById('summaryBtn');
    if (!summaryDiv || !btn) return;
    const showing = summaryDiv.classList.toggle('show');
    btn.textContent = showing ? 'ðŸ“• Hide Summary' : 'ðŸ“š View Summary';
  }
</script>
</body>
</html>

